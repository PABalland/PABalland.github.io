
<!doctype html>
<html>

<head>

  <meta charset="utf-8">
  <script src="https://www.paballand.com/js/d3plus-geomap.v0.6.full.min.js"></script>

  <style>

    body {
      margin: 1;
      overflow: hidden;
    }

  </style>

</head>

<body></body>

<script>



  var popData = 
      
      [
  {
    "urban_id": 1,
    "urban_name": "mozilla-foundation",
    "value": 2.833213344056216,
    "population": 17,
    "latitude": 37.38605,
    "longitude": -122.08385,
    "state": "US"
  },
  {
    "urban_id": 2,
    "urban_name": "huggingface",
    "value": 11.067950001766604,
    "population": 64084,
    "latitude": 40.71427,
    "longitude": -74.00597,
    "state": "Unknown"
  },
  {
    "urban_id": 3,
    "urban_name": "opentargets",
    "value": 3.4657359027997265,
    "population": 32,
    "latitude": 52.198822,
    "longitude": 0.0499476,
    "state": "GB"
  },
  {
    "urban_id": 4,
    "urban_name": "worldbank",
    "value": 5.645446897643238,
    "population": 283,
    "latitude": 38.89511,
    "longitude": -77.03637,
    "state": "US"
  },
  {
    "urban_id": 5,
    "urban_name": "IDinsight",
    "value": 2.70805020110221,
    "population": 15,
    "latitude": 37.793957,
    "longitude": -122.4026,
    "state": "US"
  },
  {
    "urban_id": 6,
    "urban_name": "NetherlandsForensicInstitute",
    "value": 9.57171425857138,
    "population": 14353,
    "latitude": 52.04464,
    "longitude": 4.35875,
    "state": "NL"
  },
  {
    "urban_id": 7,
    "urban_name": "ieuniversity",
    "value": 3.912023005428146,
    "population": 50,
    "latitude": 40.94808,
    "longitude": -4.11839,
    "state": "ES"
  },
  {
    "urban_id": 8,
    "urban_name": "Hadassah",
    "value": 4.2626798770413155,
    "population": 71,
    "latitude": 40.70696,
    "longitude": -74.009735,
    "state": "US"
  },
  {
    "urban_id": 9,
    "urban_name": "EuropeanParliament",
    "value": 4.394449154672438,
    "population": 81,
    "latitude": 50.838924,
    "longitude": 4.37391,
    "state": "BE"
  },
  {
    "urban_id": 10,
    "urban_name": "wttw",
    "value": 4.330733340286331,
    "population": 76,
    "latitude": 41.97972,
    "longitude": -87.716835,
    "state": "US"
  },
  {
    "urban_id": 11,
    "urban_name": "BinghamtonUniversity",
    "value": 0.6931471805599453,
    "population": 2,
    "latitude": 42.09869,
    "longitude": -75.91797,
    "state": "US"
  },
  {
    "urban_id": 12,
    "urban_name": "vector-institute",
    "value": 4.3694478524670215,
    "population": 79,
    "latitude": 43.70011,
    "longitude": -79.4163,
    "state": "CA"
  },
  {
    "urban_id": 13,
    "urban_name": "Canarie",
    "value": 7.537430036586509,
    "population": 1877,
    "latitude": 45.41117,
    "longitude": -75.69812,
    "state": "CA"
  },
  {
    "urban_id": 14,
    "urban_name": "CGIAR",
    "value": 0.6931471805599453,
    "population": 2,
    "latitude": 43.61093,
    "longitude": 3.87635,
    "state": "FR"
  },
  {
    "urban_id": 15,
    "urban_name": "Suva",
    "value": 4.1588830833596715,
    "population": 64,
    "latitude": 47.056507,
    "longitude": 8.309539,
    "state": "CH"
  },
  {
    "urban_id": 16,
    "urban_name": "rti-international",
    "value": 3.4011973816621555,
    "population": 30,
    "latitude": 35.99403,
    "longitude": -78.89862,
    "state": "US"
  },
  {
    "urban_id": 17,
    "urban_name": "dayone",
    "value": 2.5649493574615367,
    "population": 13,
    "latitude": 41.829716,
    "longitude": -71.389275,
    "state": "US"
  },
  {
    "urban_id": 18,
    "urban_name": "dayone",
    "value": 2.5649493574615367,
    "population": 13,
    "latitude": 34.14889,
    "longitude": -118.14334,
    "state": "US"
  },
  {
    "urban_id": 19,
    "urban_name": "dayone",
    "value": 2.5649493574615367,
    "population": 13,
    "latitude": 41.829716,
    "longitude": -71.389275,
    "state": "US"
  },
  {
    "urban_id": 20,
    "urban_name": "dayone",
    "value": 2.5649493574615367,
    "population": 13,
    "latitude": 34.14889,
    "longitude": -118.14334,
    "state": "US"
  },
  {
    "urban_id": 21,
    "urban_name": "LaCambre",
    "value": 4.060443010546419,
    "population": 58,
    "latitude": 50.817814,
    "longitude": 4.375091,
    "state": "BE"
  },
  {
    "urban_id": 22,
    "urban_name": "GeorgiaTechResearchInstitute",
    "value": 9.539716058977092,
    "population": 13901,
    "latitude": 33.749,
    "longitude": -84.38798,
    "state": "Unknown"
  },
  {
    "urban_id": 23,
    "urban_name": "battelle",
    "value": 3.0910424533583156,
    "population": 22,
    "latitude": 46.19121,
    "longitude": 6.111277,
    "state": "CH"
  },
  {
    "urban_id": 24,
    "urban_name": "battelle",
    "value": 3.0910424533583156,
    "population": 22,
    "latitude": 39.96118,
    "longitude": -82.99879,
    "state": "US"
  },
  {
    "urban_id": 25,
    "urban_name": "battelle",
    "value": 3.0910424533583156,
    "population": 22,
    "latitude": 46.19121,
    "longitude": 6.111277,
    "state": "CH"
  },
  {
    "urban_id": 26,
    "urban_name": "battelle",
    "value": 3.0910424533583156,
    "population": 22,
    "latitude": 39.96118,
    "longitude": -82.99879,
    "state": "US"
  },
  {
    "urban_id": 27,
    "urban_name": "deutsche-welle",
    "value": 2.3025850929940455,
    "population": 10,
    "latitude": 50.71697,
    "longitude": 7.127806,
    "state": "DE"
  },
  {
    "urban_id": 28,
    "urban_name": "sadhan",
    "value": 1.6094379124341003,
    "population": 5,
    "latitude": 28.567734,
    "longitude": 77.19774,
    "state": "IN"
  },
  {
    "urban_id": 29,
    "urban_name": "IBB-University",
    "value": 3.5553480614894135,
    "population": 35,
    "latitude": 13.962997,
    "longitude": 44.173233,
    "state": "YE"
  },
  {
    "urban_id": 30,
    "urban_name": "inria-chile",
    "value": 4.605170185988091,
    "population": 100,
    "latitude": -33.41811,
    "longitude": -70.6027,
    "state": "CL"
  },
  {
    "urban_id": 31,
    "urban_name": "projecthope",
    "value": 2.197224577336219,
    "population": 9,
    "latitude": 39.072582,
    "longitude": -78.03225,
    "state": "US"
  },
  {
    "urban_id": 32,
    "urban_name": "AlphaBIO",
    "value": 1.0986122886681096,
    "population": 3,
    "latitude": 43.286057,
    "longitude": 5.390018,
    "state": "FR"
  },
  {
    "urban_id": 33,
    "urban_name": "Orchid",
    "value": 2.833213344056216,
    "population": 17,
    "latitude": 51.52733,
    "longitude": -0.138079,
    "state": "GB"
  },
  {
    "urban_id": 34,
    "urban_name": "KaradenizTechnicalUniversity",
    "value": 2.0794415416798357,
    "population": 8,
    "latitude": 41.005,
    "longitude": 39.72694,
    "state": "TR"
  },
  {
    "urban_id": 35,
    "urban_name": "Pra-tham",
    "value": 2.995732273553991,
    "population": 20,
    "latitude": 28.564283,
    "longitude": 77.194016,
    "state": "IN"
  }
]


;


new d3plus.Geomap()
  .data(popData)
  .groupBy("urban_name")
  .colorScale("value")
  .colorScaleConfig({
    color: ["purple", "blue", "green", "yellow", "orange", "red"]
  })
  .point(function(d) {
    return [d.longitude, d.latitude];
  })
    
  .tooltipConfig({
      body: function(d) {
        var table = "<table class='tooltip-table'>";
        table += "<tr><td class='title'>Urban Area:</td><td class='data'>" + d.urban_name + "</td></tr>";
        table += "<tr><td class='title'>Population:</td><td class='data'>" + d.population + "</td></tr>";
        table += "</table>";
        return table;
      },
      title: function(d) {
        var txt = d.urban_name;
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();;
      }
    })
  
  
  .tileUrl("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png")
  .pointSize(function(d) {
    return d.population;
  })
  .pointSizeMin(10)
  .pointSizeMax(20)

  .render();

</script>

</html>
