
<!doctype html>
<html>

<head>

  <meta charset="utf-8">
  <script src="https://www.paballand.com/js/d3plus-geomap.v0.6.full.min.js"></script>

  <style>

    body {
      margin: 1;
      overflow: hidden;
    }

  </style>

</head>

<body></body>

<script>



  var popData = 
      
      [
  {
    "urban_id": 1,
    "urban_name": "Canada",
    "value": 11.951760872553498,
    "population": 155090,
    "latitude": 56.130366,
    "longitude": -106.346771,
    "state": "Canada"
  },
  {
    "urban_id": 2,
    "urban_name": "China",
    "value": 18.312790910042064,
    "population": 89772649,
    "latitude": 35.86166,
    "longitude": 104.195397,
    "state": "China"
  },
  {
    "urban_id": 3,
    "urban_name": "Finland",
    "value": 8.957768009971161,
    "population": 7768,
    "latitude": 61.92411,
    "longitude": 25.748151,
    "state": "Finland"
  },
  {
    "urban_id": 4,
    "urban_name": "France",
    "value": 17.92437492904824,
    "population": 60877544,
    "latitude": 46.227638,
    "longitude": 2.213749,
    "state": "France"
  },
  {
    "urban_id": 5,
    "urban_name": "Germany",
    "value": 16.016030034486818,
    "population": 9029703,
    "latitude": 51.165691,
    "longitude": 10.451526,
    "state": "Germany"
  },
  {
    "urban_id": 6,
    "urban_name": "India",
    "value": 11.942757929526687,
    "population": 153700,
    "latitude": 20.593684,
    "longitude": 78.96288,
    "state": "India"
  },
  {
    "urban_id": 7,
    "urban_name": "Israel",
    "value": 10.734917320896079,
    "population": 45932,
    "latitude": 31.046051,
    "longitude": 34.851612,
    "state": "Israel"
  },
  {
    "urban_id": 8,
    "urban_name": "Morocco",
    "value": 13.333019686625551,
    "population": 617244,
    "latitude": 31.791702,
    "longitude": -7.09262,
    "state": "Morocco"
  },
  {
    "urban_id": 9,
    "urban_name": "United Kingdom",
    "value": 16.742626942535907,
    "population": 18673705,
    "latitude": 55.378051,
    "longitude": -3.435973,
    "state": "United Kingdom"
  },
  {
    "urban_id": 10,
    "urban_name": "United States",
    "value": 19.85052195420196,
    "population": 417803571,
    "latitude": 37.09024,
    "longitude": -95.712891,
    "state": "United States"
  }
]
     


;


new d3plus.Geomap()
  .data(popData)
  .groupBy("urban_name")
  .colorScale("value")
  .colorScaleConfig({
    color: ["purple", "blue", "green", "yellow", "orange", "red"]
  })
  .point(function(d) {
    return [d.longitude, d.latitude];
  })
    
  .tooltipConfig({
      body: function(d) {
        var table = "<table class='tooltip-table'>";
        table += "<tr><td class='title'>Urban Area:</td><td class='data'>" + d.urban_name + "</td></tr>";
        table += "<tr><td class='title'>Population:</td><td class='data'>" + d.population + "</td></tr>";
        table += "</table>";
        return table;
      },
      title: function(d) {
        var txt = d.urban_name;
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();;
      }
    })
  
  
  .tileUrl("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png")
  .pointSize(function(d) {
    return d.population;
  })
  .pointSizeMin(20)
  .pointSizeMax(70)

  .render();

</script>

</html>
