
<!doctype html>
  <html>
  
  <head>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
 font-weight: bold;
 color: #FF0000;
}
.warning {
 font-weight: bold;
}
.message {
 font-style: italic;
}
.source, .output, .warning, .error, .message {
 padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  
  <meta charset="utf-8">
    <script src="https://www.paballand.com/js/d3plus-hierarchy.v0.6.full.min.js"></script>
      
      <style>
      
      body {
        margin: 0;
        overflow: hidden;
      }
    
    </style>
      
      </head>
      
      <body></body>
      
      <script>
      
      // copy and paste the data from JSON
      
     var data = 
 

[{"country_code":"AE","count":44,"color":"lightgrey","share":0.0676,"id":"AE","parent":"Other","country":"AE","value":44},{"country_code":"AM","count":2,"color":"lightgrey","share":0.0031,"id":"AM","parent":"Other","country":"AM","value":2},{"country_code":"AR","count":15,"color":"lightgrey","share":0.0231,"id":"AR","parent":"Other","country":"AR","value":15},{"country_code":"AT","count":202,"color":"#e28f26","share":0.3105,"id":"AT","parent":"Europe","country":"Austria","value":202},{"country_code":"AU","count":533,"color":"lightgrey","share":0.8193,"id":"AU","parent":"Other","country":"Australia","value":533},{"country_code":"BA","count":1,"color":"lightgrey","share":0.0015,"id":"BA","parent":"Other","country":"BA","value":1},{"country_code":"BD","count":11,"color":"lightgrey","share":0.0169,"id":"BD","parent":"Other","country":"BD","value":11},{"country_code":"BE","count":224,"color":"#e28f26","share":0.3443,"id":"BE","parent":"Europe","country":"Belgium","value":224},{"country_code":"BG","count":5,"color":"#e28f26","share":0.0077,"id":"BG","parent":"Europe","country":"Bulgaria","value":5},{"country_code":"BJ","count":1,"color":"lightgrey","share":0.0015,"id":"BJ","parent":"Other","country":"BJ","value":1},{"country_code":"BO","count":1,"color":"lightgrey","share":0.0015,"id":"BO","parent":"Other","country":"BO","value":1},{"country_code":"BR","count":163,"color":"lightgrey","share":0.2506,"id":"BR","parent":"Other","country":"BR","value":163},{"country_code":"BY","count":11,"color":"lightgrey","share":0.0169,"id":"BY","parent":"Other","country":"BY","value":11},{"country_code":"BZ","count":1,"color":"lightgrey","share":0.0015,"id":"BZ","parent":"Other","country":"BZ","value":1},{"country_code":"CA","count":1431,"color":"lightgrey","share":2.1998,"id":"CA","parent":"Other","country":"Canada","value":1431},{"country_code":"CD","count":1,"color":"lightgrey","share":0.0015,"id":"CD","parent":"Other","country":"CD","value":1},{"country_code":"CH","count":590,"color":"#669999","share":0.907,"id":"CH","parent":"Europe +","country":"Switzerland","value":590},{"country_code":"CL","count":27,"color":"lightgrey","share":0.0415,"id":"CL","parent":"Other","country":"CL","value":27},{"country_code":"CN","count":14259,"color":"#365a94","share":21.9194,"id":"CN","parent":"China","country":"China","value":14259},{"country_code":"CO","count":21,"color":"lightgrey","share":0.0323,"id":"CO","parent":"Other","country":"CO","value":21},{"country_code":"CR","count":5,"color":"lightgrey","share":0.0077,"id":"CR","parent":"Other","country":"CR","value":5},{"country_code":"CY","count":10,"color":"#e28f26","share":0.0154,"id":"CY","parent":"Europe","country":"Cyprus","value":10},{"country_code":"CZ","count":46,"color":"#e28f26","share":0.0707,"id":"CZ","parent":"Europe","country":"Czech Republic","value":46},{"country_code":"DE","count":2615,"color":"#e28f26","share":4.0199,"id":"DE","parent":"Europe","country":"Germany","value":2615},{"country_code":"DK","count":188,"color":"#e28f26","share":0.289,"id":"DK","parent":"Europe","country":"Denmark","value":188},{"country_code":"DO","count":1,"color":"lightgrey","share":0.0015,"id":"DO","parent":"Other","country":"DO","value":1},{"country_code":"DZ","count":1,"color":"lightgrey","share":0.0015,"id":"DZ","parent":"Other","country":"DZ","value":1},{"country_code":"EC","count":4,"color":"lightgrey","share":0.0061,"id":"EC","parent":"Other","country":"EC","value":4},{"country_code":"EE","count":18,"color":"#e28f26","share":0.0277,"id":"EE","parent":"Europe","country":"Estonia","value":18},{"country_code":"EG","count":8,"color":"lightgrey","share":0.0123,"id":"EG","parent":"Other","country":"EG","value":8},{"country_code":"ES","count":261,"color":"#e28f26","share":0.4012,"id":"ES","parent":"Europe","country":"Spain","value":261},{"country_code":"FI","count":302,"color":"#e28f26","share":0.4642,"id":"FI","parent":"Europe","country":"Finland","value":302},{"country_code":"FR","count":1063,"color":"#e28f26","share":1.6341,"id":"FR","parent":"Europe","country":"France","value":1063},{"country_code":"GB","count":1919,"color":"#669999","share":2.9499,"id":"GB","parent":"Europe +","country":"United Kingdom","value":1919},{"country_code":"GE","count":1,"color":"lightgrey","share":0.0015,"id":"GE","parent":"Other","country":"GE","value":1},{"country_code":"GR","count":37,"color":"lightgrey","share":0.0569,"id":"GR","parent":"Other","country":"GR","value":37},{"country_code":"HR","count":10,"color":"#e28f26","share":0.0154,"id":"HR","parent":"Europe","country":"Croatia","value":10},{"country_code":"HU","count":73,"color":"#e28f26","share":0.1122,"id":"HU","parent":"Europe","country":"Hungary","value":73},{"country_code":"ID","count":11,"color":"lightgrey","share":0.0169,"id":"ID","parent":"Other","country":"ID","value":11},{"country_code":"IE","count":224,"color":"#e28f26","share":0.3443,"id":"IE","parent":"Europe","country":"Ireland","value":224},{"country_code":"IL","count":1061,"color":"lightgrey","share":1.631,"id":"IL","parent":"Other","country":"Israel","value":1061},{"country_code":"IN","count":1355,"color":"lightgrey","share":2.0829,"id":"IN","parent":"Other","country":"India","value":1355},{"country_code":"IR","count":29,"color":"lightgrey","share":0.0446,"id":"IR","parent":"Other","country":"IR","value":29},{"country_code":"IS","count":4,"color":"#669999","share":0.0061,"id":"IS","parent":"Europe +","country":"Iceland","value":4},{"country_code":"IT","count":292,"color":"#e28f26","share":0.4489,"id":"IT","parent":"Europe","country":"Italy","value":292},{"country_code":"JE","count":1,"color":"lightgrey","share":0.0015,"id":"JE","parent":"Other","country":"JE","value":1},{"country_code":"JO","count":8,"color":"lightgrey","share":0.0123,"id":"JO","parent":"Other","country":"JO","value":8},{"country_code":"JP","count":7246,"color":"lightgrey","share":11.1388,"id":"JP","parent":"Other","country":"Japan","value":7246},{"country_code":"KE","count":5,"color":"lightgrey","share":0.0077,"id":"KE","parent":"Other","country":"KE","value":5},{"country_code":"KG","count":1,"color":"lightgrey","share":0.0015,"id":"KG","parent":"Other","country":"KG","value":1},{"country_code":"KH","count":1,"color":"lightgrey","share":0.0015,"id":"KH","parent":"Other","country":"KH","value":1},{"country_code":"KR","count":4823,"color":"lightgrey","share":7.4141,"id":"KR","parent":"Other","country":"Korea","value":4823},{"country_code":"KW","count":1,"color":"lightgrey","share":0.0015,"id":"KW","parent":"Other","country":"KW","value":1},{"country_code":"KY","count":3,"color":"lightgrey","share":0.0046,"id":"KY","parent":"Other","country":"KY","value":3},{"country_code":"KZ","count":3,"color":"lightgrey","share":0.0046,"id":"KZ","parent":"Other","country":"KZ","value":3},{"country_code":"LB","count":8,"color":"lightgrey","share":0.0123,"id":"LB","parent":"Other","country":"LB","value":8},{"country_code":"LI","count":2,"color":"#669999","share":0.0031,"id":"LI","parent":"Europe +","country":"Liechtenstein","value":2},{"country_code":"LK","count":2,"color":"lightgrey","share":0.0031,"id":"LK","parent":"Other","country":"LK","value":2},{"country_code":"LT","count":12,"color":"#e28f26","share":0.0184,"id":"LT","parent":"Europe","country":"Littuania","value":12},{"country_code":"LU","count":15,"color":"#e28f26","share":0.0231,"id":"LU","parent":"Europe","country":"Luxembourg","value":15},{"country_code":"LV","count":3,"color":"#e28f26","share":0.0046,"id":"LV","parent":"Europe","country":"Latvia","value":3},{"country_code":"MA","count":2,"color":"lightgrey","share":0.0031,"id":"MA","parent":"Other","country":"MA","value":2},{"country_code":"MC","count":9,"color":"lightgrey","share":0.0138,"id":"MC","parent":"Other","country":"MC","value":9},{"country_code":"MK","count":2,"color":"lightgrey","share":0.0031,"id":"MK","parent":"Other","country":"MK","value":2},{"country_code":"MN","count":1,"color":"lightgrey","share":0.0015,"id":"MN","parent":"Other","country":"MN","value":1},{"country_code":"MP","count":2,"color":"lightgrey","share":0.0031,"id":"MP","parent":"Other","country":"MP","value":2},{"country_code":"MT","count":23,"color":"#e28f26","share":0.0354,"id":"MT","parent":"Europe","country":"Montenegro","value":23},{"country_code":"MX","count":48,"color":"lightgrey","share":0.0738,"id":"MX","parent":"Other","country":"MX","value":48},{"country_code":"MY","count":87,"color":"lightgrey","share":0.1337,"id":"MY","parent":"Other","country":"MY","value":87},{"country_code":"NL","count":897,"color":"#e28f26","share":1.3789,"id":"NL","parent":"Europe","country":"The Netherlands","value":897},{"country_code":"NO","count":87,"color":"#669999","share":0.1337,"id":"NO","parent":"Europe +","country":"Norway","value":87},{"country_code":"NP","count":1,"color":"lightgrey","share":0.0015,"id":"NP","parent":"Other","country":"NP","value":1},{"country_code":"NZ","count":90,"color":"lightgrey","share":0.1384,"id":"NZ","parent":"Other","country":"NZ","value":90},{"country_code":"OM","count":2,"color":"lightgrey","share":0.0031,"id":"OM","parent":"Other","country":"OM","value":2},{"country_code":"PH","count":11,"color":"lightgrey","share":0.0169,"id":"PH","parent":"Other","country":"PH","value":11},{"country_code":"PK","count":7,"color":"lightgrey","share":0.0108,"id":"PK","parent":"Other","country":"PK","value":7},{"country_code":"PL","count":114,"color":"#e28f26","share":0.1752,"id":"PL","parent":"Europe","country":"Poland","value":114},{"country_code":"PR","count":4,"color":"lightgrey","share":0.0061,"id":"PR","parent":"Other","country":"PR","value":4},{"country_code":"PT","count":64,"color":"#e28f26","share":0.0984,"id":"PT","parent":"Europe","country":"Portugal","value":64},{"country_code":"PY","count":1,"color":"lightgrey","share":0.0015,"id":"PY","parent":"Other","country":"PY","value":1},{"country_code":"QA","count":8,"color":"lightgrey","share":0.0123,"id":"QA","parent":"Other","country":"QA","value":8},{"country_code":"RE","count":1,"color":"lightgrey","share":0.0015,"id":"RE","parent":"Other","country":"RE","value":1},{"country_code":"RO","count":51,"color":"#e28f26","share":0.0784,"id":"RO","parent":"Europe","country":"Romania","value":51},{"country_code":"RS","count":10,"color":"lightgrey","share":0.0154,"id":"RS","parent":"Other","country":"RS","value":10},{"country_code":"RU","count":301,"color":"lightgrey","share":0.4627,"id":"RU","parent":"Other","country":"Russia","value":301},{"country_code":"SA","count":181,"color":"lightgrey","share":0.2782,"id":"SA","parent":"Other","country":"SA","value":181},{"country_code":"SE","count":592,"color":"#e28f26","share":0.91,"id":"SE","parent":"Europe","country":"Sweden","value":592},{"country_code":"SG","count":478,"color":"lightgrey","share":0.7348,"id":"SG","parent":"Other","country":"Singapore","value":478},{"country_code":"SH","count":1,"color":"lightgrey","share":0.0015,"id":"SH","parent":"Other","country":"SH","value":1},{"country_code":"SI","count":2,"color":"#e28f26","share":0.0031,"id":"SI","parent":"Europe","country":"Slovenia","value":2},{"country_code":"SK","count":10,"color":"#e28f26","share":0.0154,"id":"SK","parent":"Europe","country":"Slovakia","value":10},{"country_code":"SM","count":1,"color":"lightgrey","share":0.0015,"id":"SM","parent":"Other","country":"SM","value":1},{"country_code":"TD","count":1,"color":"lightgrey","share":0.0015,"id":"TD","parent":"Other","country":"TD","value":1},{"country_code":"TH","count":21,"color":"lightgrey","share":0.0323,"id":"TH","parent":"Other","country":"TH","value":21},{"country_code":"TL","count":1,"color":"lightgrey","share":0.0015,"id":"TL","parent":"Other","country":"TL","value":1},{"country_code":"TN","count":3,"color":"lightgrey","share":0.0046,"id":"TN","parent":"Other","country":"TN","value":3},{"country_code":"TR","count":138,"color":"lightgrey","share":0.2121,"id":"TR","parent":"Other","country":"Turkey","value":138},{"country_code":"TW","count":38,"color":"lightgrey","share":0.0584,"id":"TW","parent":"Other","country":"TW","value":38},{"country_code":"UA","count":50,"color":"lightgrey","share":0.0769,"id":"UA","parent":"Other","country":"UA","value":50},{"country_code":"UM","count":1,"color":"lightgrey","share":0.0015,"id":"UM","parent":"Other","country":"UM","value":1},{"country_code":"US","count":22429,"color":"#8cab79","share":34.4786,"id":"US","parent":"United States","country":"United States","value":22429},{"country_code":"UY","count":4,"color":"lightgrey","share":0.0061,"id":"UY","parent":"Other","country":"UY","value":4},{"country_code":"UZ","count":1,"color":"lightgrey","share":0.0015,"id":"UZ","parent":"Other","country":"UZ","value":1},{"country_code":"VG","count":4,"color":"lightgrey","share":0.0061,"id":"VG","parent":"Other","country":"VG","value":4},{"country_code":"VN","count":20,"color":"lightgrey","share":0.0307,"id":"VN","parent":"Other","country":"VN","value":20},{"country_code":"YE","count":2,"color":"lightgrey","share":0.0031,"id":"YE","parent":"Other","country":"YE","value":2},{"country_code":"ZA","count":35,"color":"lightgrey","share":0.0538,"id":"ZA","parent":"Other","country":"ZA","value":35},{"country_code":"ZW","count":1,"color":"lightgrey","share":0.0015,"id":"ZW","parent":"Other","country":"ZW","value":1}]

;

      new d3plus.Treemap()
      .data(data)
      .groupBy(["parent", "country"])
      .tooltipConfig({
      body: function(d) {
        var table ="<table class='tooltip-table'>";
        table +="<tr><td class='title'>Total Amount of AI patents:</td><td class='data'>"+ d.count +"</td></tr>";
        table +="<tr><td class='title'>Share:</td><td class='data'>"+ d.share + "</td></tr>";
        table +="<tr><td class='title'>Country:</td><td class='data'>"+ d.country + "</td></tr>";
        table +="</table>";
        return table;
      },
      title: function(d) {
        var txt = d.country;
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();;
      }
    })
      .sum("value")
      .color("color")
      //.time({           
      // "value":"year",
      // "solo": 2001
      //})
      .render();
      
      </script>
        
        </html>
        
