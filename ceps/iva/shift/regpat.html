<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script src="https://www.paballand.com/js/d3plus-plot.v0.9.full.min.js"></script>
<style>
body{margin:0;overflow:hidden;font-family:Arial,Helvetica,sans-serif;}
.container{display:flex;flex-direction:column;height:100vh;}
#chart{flex:1 1 auto;}
.legend{display:flex;justify-content:center;padding:12px 0;}
.legend-item{display:flex;align-items:center;margin:0 24px;font-size:14px;}
.box{width:14px;height:14px;margin-right:10px;border:none;}
.pos{background:#2d7c2d;}
.neg{background:#8B1A0F;}
.tooltip-table{width:100%;}
.tooltip-table .data{text-align:right;}
.tooltip-footer{opacity:.5;}
tspan{font-family:"Helvetica","Arial",sans-serif;font-size:100px;font-style:oblique;}

.custom-label {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 10px;
  fill: #000;
  opacity: 1;
  font-weight: normal;
  transition: opacity 0.4s ease, font-size 0.4s ease, font-weight 0.4s ease;
  pointer-events: none;
  transform-origin: center;
}

.custom-label.collision {
  opacity: 0.3;
}

.custom-label.hover {
  opacity: 1 !important;
  font-size: 16px !important;
  font-weight: bold !important;
}

.custom-label, text.custom-label {
  font-family: Arial, Helvetica, sans-serif !important;
  font-size: 10px !important;
  fill: #000 !important;
  stroke: none !important;
  font-weight: normal !important;
}
</style>
</head>
<body>
<div class="container">
  <div id="chart"></div>
  <div class="legend">
    <div class="legend-item"><span class="box pos"></span><span>Growth &gt; median</span></div>
    <div class="legend-item"><span class="box neg"></span><span>Growth &lt; median</span></div>
  </div>
</div>
<script>
function median(v){
  if(!v.length)throw new Error("empty");
  v=[...v].sort((a,b)=>a-b);
  const h=Math.floor(v.length/2);
  return v.length%2?v[h]:(v[h-1]+v[h])/2;
}

function truncateText(text, maxLength = 20) {
  if (text.length <= maxLength) {
    return text;
  }
  return text.substring(0, maxLength) + "...";
}

function rectanglesOverlap(rect1, rect2) {
  return !(rect1.x + rect1.width < rect2.x || 
           rect2.x + rect2.width < rect1.x || 
           rect1.y + rect1.height < rect2.y || 
           rect2.y + rect2.height < rect1.y);
}

function getPositionOptions(centerX, centerY, radius, padding = 5) {
  return [
    { name: 'right', x: centerX + radius + padding, y: centerY + 3, anchor: 'start' },
    { name: 'left', x: centerX - radius - padding, y: centerY + 3, anchor: 'end' },
    { name: 'below', x: centerX, y: centerY + radius + padding + 10, anchor: 'middle' },
    { name: 'above', x: centerX, y: centerY - radius - padding, anchor: 'middle' }
  ];
}

function hasCollision(textElement, allCircles) {
  try {
    const textBBox = textElement.getBBox();
    
    for (const circleData of allCircles) {
      const r = parseFloat(circleData.circle.getAttribute('r')) || 7.5;
      const circleBBox = {
        x: circleData.coords.x - r,
        y: circleData.coords.y - r,
        width: r * 2,
        height: r * 2
      };
      
      if (rectanglesOverlap(textBBox, circleBBox)) {
        return true;
      }
    }
    return false;
  } catch (e) {
    return false;
  }
}

function findBestPosition(textElement, centerX, centerY, radius, allCircles, fullText) {
  const positions = getPositionOptions(centerX, centerY, radius);
  let hasCollisionWithFull = false;
  
  textElement.textContent = fullText;
  for (const pos of positions) {
    textElement.setAttribute('x', pos.x);
    textElement.setAttribute('y', pos.y);
    textElement.setAttribute('text-anchor', pos.anchor);
    
    if (!hasCollision(textElement, allCircles)) {
      return { ...pos, text: fullText, hasCollision: false };
    }
  }
  
  hasCollisionWithFull = true;
  
  const truncatedText = truncateText(fullText, 20);
  textElement.textContent = truncatedText;
  for (const pos of positions) {
    textElement.setAttribute('x', pos.x);
    textElement.setAttribute('y', pos.y);
    textElement.setAttribute('text-anchor', pos.anchor);
    
    if (!hasCollision(textElement, allCircles)) {
      return { ...pos, text: truncatedText, hasCollision: hasCollisionWithFull };
    }
  }
  
  return { ...positions[0], text: truncatedText, hasCollision: true };
}

var data=  [
  {
    "domain": "Additive Manufacturing (3D Printing)",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 160,
    "rca.x": 1.13,
    "share.x": 1.67,
    "share_d.x": 0.2323,
    "reldens.x": 47.13,
    "comp_PA.x": 68.37,
    "comp_TCI.x": 66.04,
    "comp_DIF.x": 44.58,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 15.19,
    "parent.x": "Europe",
    "color.x": "#A2B9A2",
    "id.x": "Sweden (SE)",
    "value.x": 160,
    "rank_count.x": 12,
    "rank_rca.x": 23.5,
    "rank_pc.x": 3,
    "rank_share.x": 12,
    "rank_reldens.x": 14,
    "count.y": 172,
    "rca.y": 1.18,
    "share.y": 1.51,
    "share_d.y": 0.2662,
    "reldens.y": 47.53,
    "comp_PA.y": 57.33,
    "comp_TCI.y": 64.92,
    "comp_DIF.y": 37.44,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 16.32,
    "parent.y": "Europe",
    "color.y": "#9AB59A",
    "id.y": "Sweden (SE)",
    "value.y": 172,
    "rank_count.y": 14,
    "rank_rca.y": 33,
    "rank_pc.y": 5,
    "rank_share.y": 14,
    "rank_reldens.y": 23,
    "color": "#BAC6BA",
    "id": "Additive Manufacturing (3D Printing)",
    "x": 1.67,
    "y": 1.51,
    "delta": -9.58,
    "value": 1
  },
  {
    "domain": "Advanced Materials",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 356,
    "rca.x": 0.71,
    "share.x": 1.05,
    "share_d.x": 0.8204,
    "reldens.x": 22.94,
    "comp_PA.x": 71.37,
    "comp_TCI.x": 53.35,
    "comp_DIF.x": 52.95,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 33.79,
    "parent.x": "Europe",
    "color.x": "#C8B2B2",
    "id.x": "Sweden (SE)",
    "value.x": 356,
    "rank_count.x": 13,
    "rank_rca.x": 55,
    "rank_pc.x": 7,
    "rank_share.x": 13,
    "rank_reldens.x": 62,
    "count.y": 327,
    "rca.y": 0.84,
    "share.y": 1.07,
    "share_d.y": 0.7117,
    "reldens.y": 25.8,
    "comp_PA.y": 64.07,
    "comp_TCI.y": 59.01,
    "comp_DIF.y": 45.29,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 31.03,
    "parent.y": "Europe",
    "color.y": "#CDC1C1",
    "id.y": "Sweden (SE)",
    "value.y": 327,
    "rank_count.y": 13,
    "rank_rca.y": 49,
    "rank_pc.y": 7,
    "rank_share.y": 13,
    "rank_reldens.y": 48,
    "color": "#89AC89",
    "id": "Advanced Materials",
    "x": 1.05,
    "y": 1.07,
    "delta": 1.9,
    "value": 1
  },
  {
    "domain": "Advanced Therapy Medicinal Products (ATMP)",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 30,
    "rca.x": 0.38,
    "share.x": 0.56,
    "share_d.x": 0.1297,
    "reldens.x": 7.44,
    "comp_PA.x": 76.75,
    "comp_TCI.x": 56.49,
    "comp_DIF.x": 62.21,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 2.85,
    "parent.x": "Europe",
    "color.x": "#B78282",
    "id.x": "Sweden (SE)",
    "value.x": 30,
    "rank_count.x": 17.5,
    "rank_rca.x": 40,
    "rank_pc.x": 15,
    "rank_share.x": 17.5,
    "rank_reldens.x": 108,
    "count.y": 42,
    "rca.y": 0.4,
    "share.y": 0.51,
    "share_d.y": 0.1912,
    "reldens.y": 6.63,
    "comp_PA.y": 71.8,
    "comp_TCI.y": 56.68,
    "comp_DIF.y": 65.21,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 3.99,
    "parent.y": "Europe",
    "color.y": "#B98585",
    "id.y": "Sweden (SE)",
    "value.y": 42,
    "rank_count.y": 16,
    "rank_rca.y": 37.5,
    "rank_pc.y": 10,
    "rank_share.y": 16,
    "rank_reldens.y": 108,
    "color": "#B5C3B5",
    "id": "Advanced Therapy Medicinal Products (ATMP)",
    "x": 0.56,
    "y": 0.51,
    "delta": -8.93,
    "value": 1
  },
  {
    "domain": "Aeronautics Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 173,
    "rca.x": 0.71,
    "share.x": 1.05,
    "share_d.x": 0.3989,
    "reldens.x": 41.13,
    "comp_PA.x": 69.22,
    "comp_TCI.x": 50.83,
    "comp_DIF.x": 42.06,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 16.42,
    "parent.x": "Europe",
    "color.x": "#C8B2B2",
    "id.x": "Sweden (SE)",
    "value.x": 173,
    "rank_count.x": 12,
    "rank_rca.x": 56,
    "rank_pc.x": 5,
    "rank_share.x": 12,
    "rank_reldens.x": 25,
    "count.y": 221,
    "rca.y": 1,
    "share.y": 1.27,
    "share_d.y": 0.4034,
    "reldens.y": 53.66,
    "comp_PA.y": 63.58,
    "comp_TCI.y": 59.02,
    "comp_DIF.y": 42.49,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 20.97,
    "parent.y": "Europe",
    "color.y": "lightgrey",
    "id.y": "Sweden (SE)",
    "value.y": 221,
    "rank_count.y": 10,
    "rank_rca.y": 38.5,
    "rank_pc.y": 4,
    "rank_share.y": 10,
    "rank_reldens.y": 11,
    "color": "#689A68",
    "id": "Aeronautics Technologies",
    "x": 1.05,
    "y": 1.27,
    "delta": 20.95,
    "value": 1
  },
  {
    "domain": "Artificial Intelligence",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 409,
    "rca.x": 0.72,
    "share.x": 1.07,
    "share_d.x": 0.9252,
    "reldens.x": 34.74,
    "comp_PA.x": 79.42,
    "comp_TCI.x": 15.3,
    "comp_DIF.x": 41.63,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 38.82,
    "parent.x": "Europe",
    "color.x": "#C8B3B3",
    "id.x": "Sweden (SE)",
    "value.x": 409,
    "rank_count.x": 12,
    "rank_rca.x": 55,
    "rank_pc.x": 7,
    "rank_share.x": 12,
    "rank_reldens.x": 28,
    "count.y": 969,
    "rca.y": 0.96,
    "share.y": 1.21,
    "share_d.y": 1.8538,
    "reldens.y": 32.99,
    "comp_PA.y": 72.96,
    "comp_TCI.y": 26.74,
    "comp_DIF.y": 39.99,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 91.96,
    "parent.y": "Europe",
    "color.y": "#D2CFCF",
    "id.y": "Sweden (SE)",
    "value.y": 969,
    "rank_count.y": 12,
    "rank_rca.y": 54,
    "rank_pc.y": 4,
    "rank_share.y": 12,
    "rank_reldens.y": 37,
    "color": "#73A073",
    "id": "Artificial Intelligence",
    "x": 1.07,
    "y": 1.21,
    "delta": 13.08,
    "value": 1
  },
  {
    "domain": "Augmented Reality (AR) and Virtual Reality (VR)",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 73,
    "rca.x": 0.82,
    "share.x": 1.22,
    "share_d.x": 0.1447,
    "reldens.x": 30.3,
    "comp_PA.x": 79.96,
    "comp_TCI.x": 53.68,
    "comp_DIF.x": 71.58,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 6.93,
    "parent.x": "Europe",
    "color.x": "#CCBFBF",
    "id.x": "Sweden (SE)",
    "value.x": 73,
    "rank_count.x": 12,
    "rank_rca.x": 24,
    "rank_pc.x": 4,
    "rank_share.x": 12,
    "rank_reldens.x": 31,
    "count.y": 99,
    "rca.y": 1.13,
    "share.y": 1.44,
    "share_d.y": 0.1607,
    "reldens.y": 22.59,
    "comp_PA.y": 72.71,
    "comp_TCI.y": 57.19,
    "comp_DIF.y": 54.37,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 9.4,
    "parent.y": "Europe",
    "color.y": "#A2B9A2",
    "id.y": "Sweden (SE)",
    "value.y": 99,
    "rank_count.y": 11,
    "rank_rca.y": 17,
    "rank_pc.y": 4,
    "rank_share.y": 11,
    "rank_reldens.y": 54,
    "color": "#6B9D6B",
    "id": "Augmented Reality (AR) and Virtual Reality (VR)",
    "x": 1.22,
    "y": 1.44,
    "delta": 18.03,
    "value": 1
  },
  {
    "domain": "Autonomous Vehicles",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 241,
    "rca.x": 1.78,
    "share.x": 2.63,
    "share_d.x": 0.2213,
    "reldens.x": 63.31,
    "comp_PA.x": 79.16,
    "comp_TCI.x": 55.63,
    "comp_DIF.x": 56.37,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 22.87,
    "parent.x": "Europe",
    "color.x": "#699B69",
    "id.x": "Sweden (SE)",
    "value.x": 241,
    "rank_count.x": 7,
    "rank_rca.x": 9,
    "rank_pc.x": 1,
    "rank_share.x": 7,
    "rank_reldens.x": 1,
    "count.y": 266,
    "rca.y": 1.78,
    "share.y": 2.27,
    "share_d.y": 0.2725,
    "reldens.y": 69.68,
    "comp_PA.y": 75.82,
    "comp_TCI.y": 56.09,
    "comp_DIF.y": 75.47,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 25.25,
    "parent.y": "Europe",
    "color.y": "#699B69",
    "id.y": "Sweden (SE)",
    "value.y": 266,
    "rank_count.y": 6,
    "rank_rca.y": 5,
    "rank_pc.y": 1,
    "rank_share.y": 6,
    "rank_reldens.y": 2,
    "color": "#D0CBCB",
    "id": "Autonomous Vehicles",
    "x": 2.63,
    "y": 2.27,
    "delta": -13.69,
    "value": 1
  },
  {
    "domain": "Batteries",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 339,
    "rca.x": 0.58,
    "share.x": 0.86,
    "share_d.x": 0.9519,
    "reldens.x": 36.45,
    "comp_PA.x": 78.14,
    "comp_TCI.x": 19.97,
    "comp_DIF.x": 60.46,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 32.17,
    "parent.x": "Europe",
    "color.x": "#C2A1A1",
    "id.x": "Sweden (SE)",
    "value.x": 339,
    "rank_count.x": 9,
    "rank_rca.x": 48,
    "rank_pc.x": 5,
    "rank_share.x": 9,
    "rank_reldens.x": 23,
    "count.y": 668,
    "rca.y": 0.88,
    "share.y": 1.11,
    "share_d.y": 1.3952,
    "reldens.y": 46.21,
    "comp_PA.y": 69.04,
    "comp_TCI.y": 46.65,
    "comp_DIF.y": 87.39,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 63.4,
    "parent.y": "Europe",
    "color.y": "#CFC6C6",
    "id.y": "Sweden (SE)",
    "value.y": 668,
    "rank_count.y": 8,
    "rank_rca.y": 21,
    "rank_pc.y": 4,
    "rank_share.y": 8,
    "rank_reldens.y": 12,
    "color": "#5E965E",
    "id": "Batteries",
    "x": 0.86,
    "y": 1.11,
    "delta": 29.07,
    "value": 1
  },
  {
    "domain": "Biobased Materials & Biomanufacturing",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 64,
    "rca.x": 2.07,
    "share.x": 3.05,
    "share_d.x": 0.0506,
    "reldens.x": 41.92,
    "comp_PA.x": 68.57,
    "comp_TCI.x": 71.5,
    "comp_DIF.x": 43.87,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 6.07,
    "parent.x": "Europe",
    "color.x": "#5C955C",
    "id.x": "Sweden (SE)",
    "value.x": 64,
    "rank_count.x": 8,
    "rank_rca.x": 9,
    "rank_pc.x": 2,
    "rank_share.x": 8,
    "rank_reldens.x": 26,
    "count.y": 75,
    "rca.y": 2.61,
    "share.y": 3.32,
    "share_d.y": 0.0526,
    "reldens.y": 45.49,
    "comp_PA.y": 56.26,
    "comp_TCI.y": 80.92,
    "comp_DIF.y": 25.47,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 7.12,
    "parent.y": "Europe",
    "color.y": "#4B8B4B",
    "id.y": "Sweden (SE)",
    "value.y": 75,
    "rank_count.y": 8,
    "rank_rca.y": 10,
    "rank_pc.y": 2,
    "rank_share.y": 8,
    "rank_reldens.y": 29,
    "color": "#7AA47A",
    "id": "Biobased Materials & Biomanufacturing",
    "x": 3.05,
    "y": 3.32,
    "delta": 8.85,
    "value": 1
  },
  {
    "domain": "Biofuels",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 89,
    "rca.x": 1.78,
    "share.x": 2.64,
    "share_d.x": 0.0816,
    "reldens.x": 51.69,
    "comp_PA.x": 60.17,
    "comp_TCI.x": 66.09,
    "comp_DIF.x": 24.05,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 8.45,
    "parent.x": "Europe",
    "color.x": "#699B69",
    "id.x": "Sweden (SE)",
    "value.x": 89,
    "rank_count.x": 12,
    "rank_rca.x": 27,
    "rank_pc.x": 3,
    "rank_share.x": 12,
    "rank_reldens.x": 23,
    "count.y": 48,
    "rca.y": 2.05,
    "share.y": 2.62,
    "share_d.y": 0.0428,
    "reldens.y": 55.45,
    "comp_PA.y": 47.67,
    "comp_TCI.y": 79.39,
    "comp_DIF.y": 20.02,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 4.56,
    "parent.y": "Europe",
    "color.y": "#5D955D",
    "id.y": "Sweden (SE)",
    "value.y": 48,
    "rank_count.y": 11,
    "rank_rca.y": 23,
    "rank_pc.y": 4,
    "rank_share.y": 11,
    "rank_reldens.y": 24,
    "color": "#90B090",
    "id": "Biofuels",
    "x": 2.64,
    "y": 2.62,
    "delta": -0.76,
    "value": 1
  },
  {
    "domain": "Biotechnology",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 723,
    "rca.x": 0.76,
    "share.x": 1.13,
    "share_d.x": 1.5531,
    "reldens.x": 11.87,
    "comp_PA.x": 70.36,
    "comp_TCI.x": 14.17,
    "comp_DIF.x": 39.12,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 68.62,
    "parent.x": "Europe",
    "color.x": "#CAB8B8",
    "id.x": "Sweden (SE)",
    "value.x": 723,
    "rank_count.x": 17,
    "rank_rca.x": 76.5,
    "rank_pc.x": 7,
    "rank_share.x": 17,
    "rank_reldens.x": 110,
    "count.y": 737,
    "rca.y": 0.74,
    "share.y": 0.94,
    "share_d.y": 1.823,
    "reldens.y": 13.1,
    "comp_PA.y": 64.2,
    "comp_TCI.y": 28.89,
    "comp_DIF.y": 38.76,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 69.95,
    "parent.y": "Europe",
    "color.y": "#C9B6B6",
    "id.y": "Sweden (SE)",
    "value.y": 737,
    "rank_count.y": 17,
    "rank_rca.y": 69,
    "rank_pc.y": 8,
    "rank_share.y": 17,
    "rank_reldens.y": 105,
    "color": "#CDC2C2",
    "id": "Biotechnology",
    "x": 1.13,
    "y": 0.94,
    "delta": -16.81,
    "value": 1
  },
  {
    "domain": "Blockchain Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 105,
    "rca.x": 1.45,
    "share.x": 2.15,
    "share_d.x": 0.118,
    "reldens.x": 48.91,
    "comp_PA.x": 72.36,
    "comp_TCI.x": 51.31,
    "comp_DIF.x": 28.42,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 9.97,
    "parent.x": "Europe",
    "color.x": "#7EA67E",
    "id.x": "Sweden (SE)",
    "value.x": 105,
    "rank_count.x": 8,
    "rank_rca.x": 33,
    "rank_pc.x": 2,
    "rank_share.x": 8,
    "rank_reldens.x": 23,
    "count.y": 107,
    "rca.y": 1.26,
    "share.y": 1.62,
    "share_d.y": 0.1546,
    "reldens.y": 50.25,
    "comp_PA.y": 67.05,
    "comp_TCI.y": 51.03,
    "comp_DIF.y": 31.99,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 10.16,
    "parent.y": "Europe",
    "color.y": "#90B090",
    "id.y": "Sweden (SE)",
    "value.y": 107,
    "rank_count.y": 12,
    "rank_rca.y": 36,
    "rank_pc.y": 4,
    "rank_share.y": 12,
    "rank_reldens.y": 26,
    "color": "#C5AAAA",
    "id": "Blockchain Technologies",
    "x": 2.15,
    "y": 1.62,
    "delta": -24.65,
    "value": 1
  },
  {
    "domain": "Cloud Computing and Edge Computing",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 549,
    "rca.x": 0.76,
    "share.x": 1.13,
    "share_d.x": 1.1777,
    "reldens.x": 29.85,
    "comp_PA.x": 82.42,
    "comp_TCI.x": 4.29,
    "comp_DIF.x": 75.9,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 52.1,
    "parent.x": "Europe",
    "color.x": "#CAB8B8",
    "id.x": "Sweden (SE)",
    "value.x": 549,
    "rank_count.x": 11,
    "rank_rca.x": 24,
    "rank_pc.x": 5,
    "rank_share.x": 11,
    "rank_reldens.x": 29,
    "count.y": 360,
    "rca.y": 0.61,
    "share.y": 0.78,
    "share_d.y": 1.0726,
    "reldens.y": 30.62,
    "comp_PA.y": 76.87,
    "comp_TCI.y": 23.47,
    "comp_DIF.y": 64.47,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 34.17,
    "parent.y": "Europe",
    "color.y": "#C3A5A5",
    "id.y": "Sweden (SE)",
    "value.y": 360,
    "rank_count.y": 11,
    "rank_rca.y": 46,
    "rank_pc.y": 6,
    "rank_share.y": 11,
    "rank_reldens.y": 32,
    "color": "#BD9393",
    "id": "Cloud Computing and Edge Computing",
    "x": 1.13,
    "y": 0.78,
    "delta": -30.97,
    "value": 1
  },
  {
    "domain": "Computer Vision, Language Processing, Object Recognition",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 457,
    "rca.x": 0.99,
    "share.x": 1.46,
    "share_d.x": 0.7551,
    "reldens.x": 44.69,
    "comp_PA.x": 80.73,
    "comp_TCI.x": 26.33,
    "comp_DIF.x": 54.13,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 43.37,
    "parent.x": "Europe",
    "color.x": "#D3D2D2",
    "id.x": "Sweden (SE)",
    "value.x": 457,
    "rank_count.x": 9,
    "rank_rca.x": 31,
    "rank_pc.x": 2,
    "rank_share.x": 9,
    "rank_reldens.x": 22,
    "count.y": 444,
    "rca.y": 0.75,
    "share.y": 0.96,
    "share_d.y": 1.0792,
    "reldens.y": 28.64,
    "comp_PA.y": 76.6,
    "comp_TCI.y": 31.69,
    "comp_DIF.y": 48.28,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 42.14,
    "parent.y": "Europe",
    "color.y": "#C9B7B7",
    "id.y": "Sweden (SE)",
    "value.y": 444,
    "rank_count.y": 12,
    "rank_rca.y": 44,
    "rank_pc.y": 6,
    "rank_share.y": 11.5,
    "rank_reldens.y": 43,
    "color": "#B88585",
    "id": "Computer Vision, Language Processing, Object Recognition",
    "x": 1.46,
    "y": 0.96,
    "delta": -34.25,
    "value": 1
  },
  {
    "domain": "Cybersecurity Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 748,
    "rca.x": 1.37,
    "share.x": 2.03,
    "share_d.x": 0.8899,
    "reldens.x": 49.96,
    "comp_PA.x": 78.36,
    "comp_TCI.x": 32.6,
    "comp_DIF.x": 42.49,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 70.99,
    "parent.x": "Europe",
    "color.x": "#85AA85",
    "id.x": "Sweden (SE)",
    "value.x": 748,
    "rank_count.x": 8,
    "rank_rca.x": 27,
    "rank_pc.x": 1,
    "rank_share.x": 8,
    "rank_reldens.x": 15,
    "count.y": 729,
    "rca.y": 1.42,
    "share.y": 1.81,
    "share_d.y": 0.9389,
    "reldens.y": 47.95,
    "comp_PA.y": 70.95,
    "comp_TCI.y": 41.07,
    "comp_DIF.y": 38.91,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 69.19,
    "parent.y": "Europe",
    "color.y": "#81A881",
    "id.y": "Sweden (SE)",
    "value.y": 729,
    "rank_count.y": 10,
    "rank_rca.y": 27,
    "rank_pc.y": 1,
    "rank_share.y": 10,
    "rank_reldens.y": 17,
    "color": "lightgrey",
    "id": "Cybersecurity Technologies",
    "x": 2.03,
    "y": 1.81,
    "delta": -10.84,
    "value": 1
  },
  {
    "domain": "Data Analytics Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 195,
    "rca.x": 0.53,
    "share.x": 0.78,
    "share_d.x": 0.6023,
    "reldens.x": 29.79,
    "comp_PA.x": 81.43,
    "comp_TCI.x": 28.41,
    "comp_DIF.x": 51.81,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 18.51,
    "parent.x": "Europe",
    "color.x": "#BF9A9A",
    "id.x": "Sweden (SE)",
    "value.x": 195,
    "rank_count.x": 14,
    "rank_rca.x": 53,
    "rank_pc.x": 7,
    "rank_share.x": 14,
    "rank_reldens.x": 41,
    "count.y": 111,
    "rca.y": 0.35,
    "share.y": 0.45,
    "share_d.y": 0.5771,
    "reldens.y": 27.98,
    "comp_PA.y": 77.33,
    "comp_TCI.y": 34.45,
    "comp_DIF.y": 47.84,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 10.53,
    "parent.y": "Europe",
    "color.y": "#B67D7D",
    "id.y": "Sweden (SE)",
    "value.y": 111,
    "rank_count.y": 15,
    "rank_rca.y": 63,
    "rank_pc.y": 8,
    "rank_share.y": 15,
    "rank_reldens.y": 52,
    "color": "#AB5D5D",
    "id": "Data Analytics Technologies",
    "x": 0.78,
    "y": 0.45,
    "delta": -42.31,
    "value": 1
  },
  {
    "domain": "Defence Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 103,
    "rca.x": 1.37,
    "share.x": 2.03,
    "share_d.x": 0.1226,
    "reldens.x": 59.37,
    "comp_PA.x": 62.7,
    "comp_TCI.x": 71.93,
    "comp_DIF.x": 31.04,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 9.78,
    "parent.x": "Europe",
    "color.x": "#85AA85",
    "id.x": "Sweden (SE)",
    "value.x": 103,
    "rank_count.x": 10.5,
    "rank_rca.x": 32,
    "rank_pc.x": 2,
    "rank_share.x": 10.5,
    "rank_reldens.x": 7,
    "count.y": 84,
    "rca.y": 1.59,
    "share.y": 2.03,
    "share_d.y": 0.0963,
    "reldens.y": 69.45,
    "comp_PA.y": 47.49,
    "comp_TCI.y": 74.97,
    "comp_DIF.y": 26.2,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 7.97,
    "parent.y": "Europe",
    "color.y": "#74A174",
    "id.y": "Sweden (SE)",
    "value.y": 84,
    "rank_count.y": 10,
    "rank_rca.y": 31,
    "rank_pc.y": 3,
    "rank_share.y": 10,
    "rank_reldens.y": 6,
    "color": "#8EAF8E",
    "id": "Defence Technologies",
    "x": 2.03,
    "y": 2.03,
    "delta": 0,
    "value": 1
  },
  {
    "domain": "Drones",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 34,
    "rca.x": 0.54,
    "share.x": 0.79,
    "share_d.x": 0.1036,
    "reldens.x": 40.99,
    "comp_PA.x": 76.62,
    "comp_TCI.x": 50.79,
    "comp_DIF.x": 37.69,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 3.23,
    "parent.x": "Europe",
    "color.x": "#C09B9B",
    "id.x": "Sweden (SE)",
    "value.x": 34,
    "rank_count.x": 12,
    "rank_rca.x": 51,
    "rank_pc.x": 6,
    "rank_share.x": 12,
    "rank_reldens.x": 35,
    "count.y": 48,
    "rca.y": 1.03,
    "share.y": 1.31,
    "share_d.y": 0.0849,
    "reldens.y": 64.23,
    "comp_PA.y": 68.96,
    "comp_TCI.y": 72.26,
    "comp_DIF.y": 33.27,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 4.56,
    "parent.y": "Europe",
    "color.y": "#BBC6BB",
    "id.y": "Sweden (SE)",
    "value.y": 48,
    "rank_count.y": 10,
    "rank_rca.y": 30,
    "rank_pc.y": 5,
    "rank_share.y": 10,
    "rank_reldens.y": 12,
    "color": "#428742",
    "id": "Drones",
    "x": 0.79,
    "y": 1.31,
    "delta": 65.82,
    "value": 1
  },
  {
    "domain": "Financial Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 28,
    "rca.x": 0.4,
    "share.x": 0.59,
    "share_d.x": 0.1147,
    "reldens.x": 43.72,
    "comp_PA.x": 74.28,
    "comp_TCI.x": 43.68,
    "comp_DIF.x": 29.71,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 2.66,
    "parent.x": "Europe",
    "color.x": "#B98585",
    "id.x": "Sweden (SE)",
    "value.x": 28,
    "rank_count.x": 15.5,
    "rank_rca.x": 54,
    "rank_pc.x": 10,
    "rank_share.x": 15.5,
    "rank_reldens.x": 46,
    "count.y": 28,
    "rca.y": 0.36,
    "share.y": 0.46,
    "share_d.y": 0.1409,
    "reldens.y": 43.03,
    "comp_PA.y": 69.92,
    "comp_TCI.y": 45.32,
    "comp_DIF.y": 31.11,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 2.66,
    "parent.y": "Europe",
    "color.y": "#B67F7F",
    "id.y": "Sweden (SE)",
    "value.y": 28,
    "rank_count.y": 19.5,
    "rank_rca.y": 59,
    "rank_pc.y": 14,
    "rank_share.y": 19.5,
    "rank_reldens.y": 39,
    "color": "#C8B2B2",
    "id": "Financial Technologies",
    "x": 0.59,
    "y": 0.46,
    "delta": -22.03,
    "value": 1
  },
  {
    "domain": "Heat Pumps",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 117,
    "rca.x": 0.57,
    "share.x": 0.85,
    "share_d.x": 0.3339,
    "reldens.x": 44.25,
    "comp_PA.x": 67.55,
    "comp_TCI.x": 59.91,
    "comp_DIF.x": 43.35,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 11.1,
    "parent.x": "Europe",
    "color.x": "#C19F9F",
    "id.x": "Sweden (SE)",
    "value.x": 117,
    "rank_count.x": 13,
    "rank_rca.x": 52.5,
    "rank_pc.x": 5,
    "rank_share.x": 12.5,
    "rank_reldens.x": 19,
    "count.y": 106,
    "rca.y": 0.62,
    "share.y": 0.78,
    "share_d.y": 0.3144,
    "reldens.y": 32.4,
    "comp_PA.y": 59.18,
    "comp_TCI.y": 56.17,
    "comp_DIF.y": 39.6,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 10.06,
    "parent.y": "Europe",
    "color.y": "#C4A6A6",
    "id.y": "Sweden (SE)",
    "value.y": 106,
    "rank_count.y": 12,
    "rank_rca.y": 52,
    "rank_pc.y": 4,
    "rank_share.y": 12,
    "rank_reldens.y": 35,
    "color": "#B0C0B0",
    "id": "Heat Pumps",
    "x": 0.85,
    "y": 0.78,
    "delta": -8.24,
    "value": 1
  },
  {
    "domain": "High Performance Computing",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 10,
    "rca.x": 0.78,
    "share.x": 1.16,
    "share_d.x": 0.021,
    "reldens.x": 38.64,
    "comp_PA.x": 81.21,
    "comp_TCI.x": 73.55,
    "comp_DIF.x": 58.79,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 0.95,
    "parent.x": "Europe",
    "color.x": "#CBBABA",
    "id.x": "Sweden (SE)",
    "value.x": 10,
    "rank_count.x": 11,
    "rank_rca.x": 14,
    "rank_pc.x": 4,
    "rank_share.x": 11,
    "rank_reldens.x": 18,
    "count.y": 7,
    "rca.y": 1.03,
    "share.y": 1.31,
    "share_d.y": 0.0125,
    "reldens.y": 24.88,
    "comp_PA.y": 76.49,
    "comp_TCI.y": 78.89,
    "comp_DIF.y": 53.14,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 0.66,
    "parent.y": "Europe",
    "color.y": "#BBC6BB",
    "id.y": "Sweden (SE)",
    "value.y": 7,
    "rank_count.y": 7.5,
    "rank_rca.y": 11,
    "rank_pc.y": 2,
    "rank_share.y": 7.5,
    "rank_reldens.y": 39,
    "color": "#73A173",
    "id": "High Performance Computing",
    "x": 1.16,
    "y": 1.31,
    "delta": 12.93,
    "value": 1
  },
  {
    "domain": "Hydrogen Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 202,
    "rca.x": 0.7,
    "share.x": 1.04,
    "share_d.x": 0.4694,
    "reldens.x": 35.79,
    "comp_PA.x": 76.21,
    "comp_TCI.x": 36.57,
    "comp_DIF.x": 65.49,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 19.17,
    "parent.x": "Europe",
    "color.x": "#C7B1B1",
    "id.x": "Sweden (SE)",
    "value.x": 202,
    "rank_count.x": 9,
    "rank_rca.x": 33,
    "rank_pc.x": 4,
    "rank_share.x": 9,
    "rank_reldens.x": 30,
    "count.y": 404,
    "rca.y": 1.08,
    "share.y": 1.37,
    "share_d.y": 0.6867,
    "reldens.y": 37.09,
    "comp_PA.y": 68.21,
    "comp_TCI.y": 60.27,
    "comp_DIF.y": 77.33,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 38.34,
    "parent.y": "Europe",
    "color.y": "#ACBFAC",
    "id.y": "Sweden (SE)",
    "value.y": 404,
    "rank_count.y": 8,
    "rank_rca.y": 13,
    "rank_pc.y": 4,
    "rank_share.y": 8,
    "rank_reldens.y": 18,
    "color": "#5C945C",
    "id": "Hydrogen Technologies",
    "x": 1.04,
    "y": 1.37,
    "delta": 31.73,
    "value": 1
  },
  {
    "domain": "Hydropower Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 145,
    "rca.x": 1.61,
    "share.x": 2.38,
    "share_d.x": 0.147,
    "reldens.x": 59.14,
    "comp_PA.x": 63.27,
    "comp_TCI.x": 62.99,
    "comp_DIF.x": 33.17,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 13.76,
    "parent.x": "Europe",
    "color.x": "#73A173",
    "id.x": "Sweden (SE)",
    "value.x": 145,
    "rank_count.x": 10,
    "rank_rca.x": 26,
    "rank_pc.x": 4,
    "rank_share.x": 10,
    "rank_reldens.x": 12,
    "count.y": 87,
    "rca.y": 1.11,
    "share.y": 1.42,
    "share_d.y": 0.1427,
    "reldens.y": 60.45,
    "comp_PA.y": 53.86,
    "comp_TCI.y": 69.01,
    "comp_DIF.y": 33.91,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 8.26,
    "parent.y": "Europe",
    "color.y": "#A6BBA6",
    "id.y": "Sweden (SE)",
    "value.y": 87,
    "rank_count.y": 12,
    "rank_rca.y": 39,
    "rank_pc.y": 6,
    "rank_share.y": 12,
    "rank_reldens.y": 19,
    "color": "#AE6868",
    "id": "Hydropower Technologies",
    "x": 2.38,
    "y": 1.42,
    "delta": -40.34,
    "value": 1
  },
  {
    "domain": "Industrial Automation and Process Control",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 179,
    "rca.x": 1.59,
    "share.x": 2.35,
    "share_d.x": 0.1842,
    "reldens.x": 68.58,
    "comp_PA.x": 77.76,
    "comp_TCI.x": 61.34,
    "comp_DIF.x": 64.21,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 16.99,
    "parent.x": "Europe",
    "color.x": "#74A174",
    "id.x": "Sweden (SE)",
    "value.x": 179,
    "rank_count.x": 7,
    "rank_rca.x": 7,
    "rank_pc.x": 1,
    "rank_share.x": 7,
    "rank_reldens.x": 3,
    "count.y": 172,
    "rca.y": 1.12,
    "share.y": 1.42,
    "share_d.y": 0.2808,
    "reldens.y": 53.31,
    "comp_PA.y": 72.65,
    "comp_TCI.y": 62.17,
    "comp_DIF.y": 57.46,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 16.32,
    "parent.y": "Europe",
    "color.y": "#A4BAA4",
    "id.y": "Sweden (SE)",
    "value.y": 172,
    "rank_count.y": 9,
    "rank_rca.y": 18,
    "rank_pc.y": 3,
    "rank_share.y": 9,
    "rank_reldens.y": 11,
    "color": "#B06C6C",
    "id": "Industrial Automation and Process Control",
    "x": 2.35,
    "y": 1.42,
    "delta": -39.57,
    "value": 1
  },
  {
    "domain": "Internet of Things (IoT)",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 12,
    "rca.x": 1.73,
    "share.x": 2.55,
    "share_d.x": 0.0114,
    "reldens.x": 66.13,
    "comp_PA.x": 75.55,
    "comp_TCI.x": 72.11,
    "comp_DIF.x": 21.2,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 1.14,
    "parent.x": "Europe",
    "color.x": "#6C9D6C",
    "id.x": "Sweden (SE)",
    "value.x": 12,
    "rank_count.x": 6,
    "rank_rca.x": 18,
    "rank_pc.x": 2,
    "rank_share.x": 6,
    "rank_reldens.x": 10,
    "count.y": 21,
    "rca.y": 1,
    "share.y": 1.28,
    "share_d.y": 0.0382,
    "reldens.y": 30.12,
    "comp_PA.y": 75.73,
    "comp_TCI.y": 62.29,
    "comp_DIF.y": 40.28,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 1.99,
    "parent.y": "Europe",
    "color.y": "lightgrey",
    "id.y": "Sweden (SE)",
    "value.y": 21,
    "rank_count.y": 9,
    "rank_rca.y": 22.5,
    "rank_pc.y": 4,
    "rank_share.y": 9,
    "rank_reldens.y": 26,
    "color": "darkred",
    "id": "Internet of Things (IoT)",
    "x": 2.55,
    "y": 1.28,
    "delta": -49.8,
    "value": 1
  },
  {
    "domain": "Life Sciences & Pharmaceuticals",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 933,
    "rca.x": 0.68,
    "share.x": 1.01,
    "share_d.x": 2.246,
    "reldens.x": 8.9,
    "comp_PA.x": 67.3,
    "comp_TCI.x": 14.67,
    "comp_DIF.x": 38.93,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 88.55,
    "parent.x": "Europe",
    "color.x": "#C6AEAE",
    "id.x": "Sweden (SE)",
    "value.x": 933,
    "rank_count.x": 17,
    "rank_rca.x": 98.5,
    "rank_pc.x": 7,
    "rank_share.x": 17,
    "rank_reldens.x": 115,
    "count.y": 879,
    "rca.y": 0.64,
    "share.y": 0.82,
    "share_d.y": 2.5029,
    "reldens.y": 6.84,
    "comp_PA.y": 60.42,
    "comp_TCI.y": 28.85,
    "comp_DIF.y": 37.54,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 83.42,
    "parent.y": "Europe",
    "color.y": "#C5A9A9",
    "id.y": "Sweden (SE)",
    "value.y": 879,
    "rank_count.y": 19,
    "rank_rca.y": 96,
    "rank_pc.y": 8,
    "rank_share.y": 19,
    "rank_reldens.y": 116,
    "color": "#CBBCBC",
    "id": "Life Sciences & Pharmaceuticals",
    "x": 1.01,
    "y": 0.82,
    "delta": -18.81,
    "value": 1
  },
  {
    "domain": "Maritime Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 211,
    "rca.x": 1.99,
    "share.x": 2.95,
    "share_d.x": 0.1735,
    "reldens.x": 60.78,
    "comp_PA.x": 60.95,
    "comp_TCI.x": 58.59,
    "comp_DIF.x": 29.18,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 20.03,
    "parent.x": "Europe",
    "color.x": "#609660",
    "id.x": "Sweden (SE)",
    "value.x": 211,
    "rank_count.x": 11,
    "rank_rca.x": 31,
    "rank_pc.x": 4,
    "rank_share.x": 11,
    "rank_reldens.x": 18,
    "count.y": 177,
    "rca.y": 2.17,
    "share.y": 2.78,
    "share_d.y": 0.1488,
    "reldens.y": 70.38,
    "comp_PA.y": 50.04,
    "comp_TCI.y": 64.84,
    "comp_DIF.y": 27.58,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 16.8,
    "parent.y": "Europe",
    "color.y": "#599359",
    "id.y": "Sweden (SE)",
    "value.y": 177,
    "rank_count.y": 10,
    "rank_rca.y": 26,
    "rank_pc.y": 3,
    "rank_share.y": 10,
    "rank_reldens.y": 8,
    "color": "#A2B9A2",
    "id": "Maritime Technologies",
    "x": 2.95,
    "y": 2.78,
    "delta": -5.76,
    "value": 1
  },
  {
    "domain": "Medtech",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 1409,
    "rca.x": 0.85,
    "share.x": 1.27,
    "share_d.x": 2.6987,
    "reldens.x": 36.6,
    "comp_PA.x": 69.13,
    "comp_TCI.x": 20.68,
    "comp_DIF.x": 39.35,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 133.72,
    "parent.x": "Europe",
    "color.x": "#CDC3C3",
    "id.x": "Sweden (SE)",
    "value.x": 1409,
    "rank_count.x": 14,
    "rank_rca.x": 76.5,
    "rank_pc.x": 6,
    "rank_share.x": 14,
    "rank_reldens.x": 43,
    "count.y": 1283,
    "rca.y": 0.86,
    "share.y": 1.1,
    "share_d.y": 2.7306,
    "reldens.y": 34.73,
    "comp_PA.y": 58.67,
    "comp_TCI.y": 36.65,
    "comp_DIF.y": 37.83,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 121.77,
    "parent.y": "Europe",
    "color.y": "#CEC4C4",
    "id.y": "Sweden (SE)",
    "value.y": 1283,
    "rank_count.y": 15,
    "rank_rca.y": 85,
    "rank_pc.y": 7,
    "rank_share.y": 15,
    "rank_reldens.y": 56,
    "color": "#D1CCCC",
    "id": "Medtech",
    "x": 1.27,
    "y": 1.1,
    "delta": -13.39,
    "value": 1
  },
  {
    "domain": "Metals and Minerals Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 1865,
    "rca.x": 0.72,
    "share.x": 1.06,
    "share_d.x": 4.2577,
    "reldens.x": 32.06,
    "comp_PA.x": 67.45,
    "comp_TCI.x": 36.64,
    "comp_DIF.x": 39.78,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 177,
    "parent.x": "Europe",
    "color.x": "#C8B3B3",
    "id.x": "Sweden (SE)",
    "value.x": 1865,
    "rank_count.x": 14,
    "rank_rca.x": 89.5,
    "rank_pc.x": 8,
    "rank_share.x": 13,
    "rank_reldens.x": 40,
    "count.y": 1534,
    "rca.y": 0.76,
    "share.y": 0.97,
    "share_d.y": 3.6684,
    "reldens.y": 33.81,
    "comp_PA.y": 58.29,
    "comp_TCI.y": 34.56,
    "comp_DIF.y": 38.32,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 145.59,
    "parent.y": "Europe",
    "color.y": "#CAB8B8",
    "id.y": "Sweden (SE)",
    "value.y": 1534,
    "rank_count.y": 16,
    "rank_rca.y": 87,
    "rank_pc.y": 10,
    "rank_share.y": 16.5,
    "rank_reldens.y": 34,
    "color": "#B1C1B1",
    "id": "Metals and Minerals Technologies",
    "x": 1.06,
    "y": 0.97,
    "delta": -8.49,
    "value": 1
  },
  {
    "domain": "Mobile networks (e.g. 5G and 6G)",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 25,
    "rca.x": 1.93,
    "share.x": 2.85,
    "share_d.x": 0.0212,
    "reldens.x": 62.77,
    "comp_PA.x": 76.96,
    "comp_TCI.x": 69.67,
    "comp_DIF.x": 35.12,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 2.37,
    "parent.x": "Europe",
    "color.x": "#629862",
    "id.x": "Sweden (SE)",
    "value.x": 25,
    "rank_count.x": 6,
    "rank_rca.x": 15,
    "rank_pc.x": 2,
    "rank_share.x": 6,
    "rank_reldens.x": 6,
    "count.y": 27,
    "rca.y": 2.18,
    "share.y": 2.77,
    "share_d.y": 0.0226,
    "reldens.y": 67.77,
    "comp_PA.y": 75.1,
    "comp_TCI.y": 78.74,
    "comp_DIF.y": 45.14,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 2.56,
    "parent.y": "Europe",
    "color.y": "#589258",
    "id.y": "Sweden (SE)",
    "value.y": 27,
    "rank_count.y": 7,
    "rank_rca.y": 8,
    "rank_pc.y": 1,
    "rank_share.y": 7,
    "rank_reldens.y": 2,
    "color": "#97B397",
    "id": "Mobile networks (e.g. 5G and 6G)",
    "x": 2.85,
    "y": 2.77,
    "delta": -2.81,
    "value": 1
  },
  {
    "domain": "Nuclear Energy Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 36,
    "rca.x": 1.62,
    "share.x": 2.39,
    "share_d.x": 0.0364,
    "reldens.x": 52.83,
    "comp_PA.x": 61.61,
    "comp_TCI.x": 75.28,
    "comp_DIF.x": 59.46,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 3.42,
    "parent.x": "Europe",
    "color.x": "#72A072",
    "id.x": "Sweden (SE)",
    "value.x": 36,
    "rank_count.x": 10,
    "rank_rca.x": 9,
    "rank_pc.x": 1,
    "rank_share.x": 10,
    "rank_reldens.x": 9,
    "count.y": 25,
    "rca.y": 1.06,
    "share.y": 1.35,
    "share_d.y": 0.0431,
    "reldens.y": 39.5,
    "comp_PA.y": 55.19,
    "comp_TCI.y": 71.18,
    "comp_DIF.y": 53.88,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 2.37,
    "parent.y": "Europe",
    "color.y": "#B1C1B1",
    "id.y": "Sweden (SE)",
    "value.y": 25,
    "rank_count.y": 10,
    "rank_rca.y": 16,
    "rank_pc.y": 2,
    "rank_share.y": 10,
    "rank_reldens.y": 21,
    "color": "#A85555",
    "id": "Nuclear Energy Technologies",
    "x": 2.39,
    "y": 1.35,
    "delta": -43.51,
    "value": 1
  },
  {
    "domain": "Personalised Medicine",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 128,
    "rca.x": 0.74,
    "share.x": 1.09,
    "share_d.x": 0.283,
    "reldens.x": 16.93,
    "comp_PA.x": 72.98,
    "comp_TCI.x": 39.73,
    "comp_DIF.x": 38.88,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 12.15,
    "parent.x": "Europe",
    "color.x": "#C9B6B6",
    "id.x": "Sweden (SE)",
    "value.x": 128,
    "rank_count.x": 14,
    "rank_rca.x": 53,
    "rank_pc.x": 8,
    "rank_share.x": 14,
    "rank_reldens.x": 97,
    "count.y": 158,
    "rca.y": 0.71,
    "share.y": 0.91,
    "share_d.y": 0.405,
    "reldens.y": 16.68,
    "comp_PA.y": 64.87,
    "comp_TCI.y": 42.97,
    "comp_DIF.y": 38.47,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 15,
    "parent.y": "Europe",
    "color.y": "#C8B2B2",
    "id.y": "Sweden (SE)",
    "value.y": 158,
    "rank_count.y": 14,
    "rank_rca.y": 58,
    "rank_pc.y": 10,
    "rank_share.y": 14,
    "rank_reldens.y": 89,
    "color": "#CEC3C3",
    "id": "Personalised Medicine",
    "x": 1.09,
    "y": 0.91,
    "delta": -16.51,
    "value": 1
  },
  {
    "domain": "Photonics and Spintronics",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 16,
    "rca.x": 0.6,
    "share.x": 0.89,
    "share_d.x": 0.0436,
    "reldens.x": 16.92,
    "comp_PA.x": 72.67,
    "comp_TCI.x": 70.07,
    "comp_DIF.x": 38.36,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 1.52,
    "parent.x": "Europe",
    "color.x": "#C3A3A3",
    "id.x": "Sweden (SE)",
    "value.x": 16,
    "rank_count.x": 16.5,
    "rank_rca.x": 35,
    "rank_pc.x": 10,
    "rank_share.x": 16.5,
    "rank_reldens.x": 62,
    "count.y": 21,
    "rca.y": 0.83,
    "share.y": 1.06,
    "share_d.y": 0.0463,
    "reldens.y": 14.53,
    "comp_PA.y": 65.17,
    "comp_TCI.y": 77.21,
    "comp_DIF.y": 52.6,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 1.99,
    "parent.y": "Europe",
    "color.y": "#CDC0C0",
    "id.y": "Sweden (SE)",
    "value.y": 21,
    "rank_count.y": 12.5,
    "rank_rca.y": 28,
    "rank_pc.y": 7,
    "rank_share.y": 12.5,
    "rank_reldens.y": 66,
    "color": "#6A9C6A",
    "id": "Photonics and Spintronics",
    "x": 0.89,
    "y": 1.06,
    "delta": 19.1,
    "value": 1
  },
  {
    "domain": "Production Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 444,
    "rca.x": 1.04,
    "share.x": 1.55,
    "share_d.x": 0.695,
    "reldens.x": 47.12,
    "comp_PA.x": 72.35,
    "comp_TCI.x": 57.18,
    "comp_DIF.x": 66.92,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 42.14,
    "parent.x": "Europe",
    "color.x": "#B7C5B7",
    "id.x": "Sweden (SE)",
    "value.x": 444,
    "rank_count.x": 8,
    "rank_rca.x": 20,
    "rank_pc.x": 6,
    "rank_share.x": 8,
    "rank_reldens.x": 9,
    "count.y": 394,
    "rca.y": 1.21,
    "share.y": 1.53,
    "share_d.y": 0.5971,
    "reldens.y": 46.06,
    "comp_PA.y": 64.66,
    "comp_TCI.y": 66.26,
    "comp_DIF.y": 77.04,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 37.39,
    "parent.y": "Europe",
    "color.y": "#96B396",
    "id.y": "Sweden (SE)",
    "value.y": 394,
    "rank_count.y": 8,
    "rank_rca.y": 10,
    "rank_pc.y": 5,
    "rank_share.y": 8,
    "rank_reldens.y": 10,
    "color": "#92B192",
    "id": "Production Technologies",
    "x": 1.55,
    "y": 1.53,
    "delta": -1.29,
    "value": 1
  },
  {
    "domain": "Propulsion Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 706,
    "rca.x": 1.26,
    "share.x": 1.86,
    "share_d.x": 0.9164,
    "reldens.x": 51.83,
    "comp_PA.x": 70.59,
    "comp_TCI.x": 43.26,
    "comp_DIF.x": 41.11,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 67,
    "parent.x": "Europe",
    "color.x": "#90B090",
    "id.x": "Sweden (SE)",
    "value.x": 706,
    "rank_count.x": 9,
    "rank_rca.x": 35.5,
    "rank_pc.x": 3,
    "rank_share.x": 9,
    "rank_reldens.x": 10,
    "count.y": 745,
    "rca.y": 1.59,
    "share.y": 2.03,
    "share_d.y": 0.8545,
    "reldens.y": 63.88,
    "comp_PA.y": 62.22,
    "comp_TCI.y": 57.12,
    "comp_DIF.y": 43.08,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 70.71,
    "parent.y": "Europe",
    "color.y": "#74A174",
    "id.y": "Sweden (SE)",
    "value.y": 745,
    "rank_count.y": 8,
    "rank_rca.y": 19,
    "rank_pc.y": 1,
    "rank_share.y": 8,
    "rank_reldens.y": 5,
    "color": "#7AA47A",
    "id": "Propulsion Technologies",
    "x": 1.86,
    "y": 2.03,
    "delta": 9.14,
    "value": 1
  },
  {
    "domain": "Quantum Technologies and Computing",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 70,
    "rca.x": 0.65,
    "share.x": 0.96,
    "share_d.x": 0.1762,
    "reldens.x": 35.41,
    "comp_PA.x": 77.95,
    "comp_TCI.x": 52.84,
    "comp_DIF.x": 65.64,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 6.64,
    "parent.x": "Europe",
    "color.x": "#C5AAAA",
    "id.x": "Sweden (SE)",
    "value.x": 70,
    "rank_count.x": 12.5,
    "rank_rca.x": 35,
    "rank_pc.x": 7,
    "rank_share.x": 12.5,
    "rank_reldens.x": 21,
    "count.y": 65,
    "rca.y": 0.57,
    "share.y": 0.72,
    "share_d.y": 0.2088,
    "reldens.y": 32.64,
    "comp_PA.y": 73.11,
    "comp_TCI.y": 68.81,
    "comp_DIF.y": 63.79,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 6.17,
    "parent.y": "Europe",
    "color.y": "#C19F9F",
    "id.y": "Sweden (SE)",
    "value.y": 65,
    "rank_count.y": 15,
    "rank_rca.y": 35,
    "rank_pc.y": 11,
    "rank_share.y": 15,
    "rank_reldens.y": 19,
    "color": "#C4A8A8",
    "id": "Quantum Technologies and Computing",
    "x": 0.96,
    "y": 0.72,
    "delta": -25,
    "value": 1
  },
  {
    "domain": "Recycling Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 116,
    "rca.x": 1.01,
    "share.x": 1.49,
    "share_d.x": 0.1884,
    "reldens.x": 34.62,
    "comp_PA.x": 60.28,
    "comp_TCI.x": 63.14,
    "comp_DIF.x": 29.66,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 11.01,
    "parent.x": "Europe",
    "color.x": "#C5CCC5",
    "id.x": "Sweden (SE)",
    "value.x": 116,
    "rank_count.x": 14,
    "rank_rca.x": 59,
    "rank_pc.x": 6,
    "rank_share.x": 14,
    "rank_reldens.x": 47,
    "count.y": 145,
    "rca.y": 1.01,
    "share.y": 1.28,
    "share_d.y": 0.2635,
    "reldens.y": 42.39,
    "comp_PA.y": 53.26,
    "comp_TCI.y": 64.97,
    "comp_DIF.y": 32.73,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 13.76,
    "parent.y": "Europe",
    "color.y": "#C5CCC5",
    "id.y": "Sweden (SE)",
    "value.y": 145,
    "rank_count.y": 16,
    "rank_rca.y": 52,
    "rank_pc.y": 7,
    "rank_share.y": 16,
    "rank_reldens.y": 39,
    "color": "#D0CACA",
    "id": "Recycling Technologies",
    "x": 1.49,
    "y": 1.28,
    "delta": -14.09,
    "value": 1
  },
  {
    "domain": "Robotics",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 215,
    "rca.x": 1.19,
    "share.x": 1.77,
    "share_d.x": 0.2945,
    "reldens.x": 58.46,
    "comp_PA.x": 75.81,
    "comp_TCI.x": 53.9,
    "comp_DIF.x": 56.27,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 20.41,
    "parent.x": "Europe",
    "color.x": "#99B499",
    "id.x": "Sweden (SE)",
    "value.x": 215,
    "rank_count.x": 11,
    "rank_rca.x": 19.5,
    "rank_pc.x": 4,
    "rank_share.x": 11,
    "rank_reldens.x": 3,
    "count.y": 164,
    "rca.y": 0.76,
    "share.y": 0.96,
    "share_d.y": 0.3952,
    "reldens.y": 58.09,
    "comp_PA.y": 68.92,
    "comp_TCI.y": 64.25,
    "comp_DIF.y": 54.61,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 15.56,
    "parent.y": "Europe",
    "color.y": "#CAB8B8",
    "id.y": "Sweden (SE)",
    "value.y": 164,
    "rank_count.y": 13,
    "rank_rca.y": 47,
    "rank_pc.y": 7,
    "rank_share.y": 13,
    "rank_reldens.y": 4,
    "color": "#A24444",
    "id": "Robotics",
    "x": 1.77,
    "y": 0.96,
    "delta": -45.76,
    "value": 1
  },
  {
    "domain": "Safety and Security Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 853,
    "rca.x": 1.38,
    "share.x": 2.04,
    "share_d.x": 1.0133,
    "reldens.x": 54.2,
    "comp_PA.x": 70.8,
    "comp_TCI.x": 44.08,
    "comp_DIF.x": 42.44,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 80.96,
    "parent.x": "Europe",
    "color.x": "#84A984",
    "id.x": "Sweden (SE)",
    "value.x": 853,
    "rank_count.x": 9,
    "rank_rca.x": 20,
    "rank_pc.x": 2,
    "rank_share.x": 9,
    "rank_reldens.x": 4,
    "count.y": 726,
    "rca.y": 1.3,
    "share.y": 1.66,
    "share_d.y": 1.0185,
    "reldens.y": 49.02,
    "comp_PA.y": 63.11,
    "comp_TCI.y": 51.4,
    "comp_DIF.y": 43.77,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 68.9,
    "parent.y": "Europe",
    "color.y": "#8CAE8C",
    "id.y": "Sweden (SE)",
    "value.y": 726,
    "rank_count.y": 9,
    "rank_rca.y": 20,
    "rank_pc.y": 3,
    "rank_share.y": 9,
    "rank_reldens.y": 8,
    "color": "#CBBDBD",
    "id": "Safety and Security Technologies",
    "x": 2.04,
    "y": 1.66,
    "delta": -18.63,
    "value": 1
  },
  {
    "domain": "Semiconductors and Chips",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 530,
    "rca.x": 0.39,
    "share.x": 0.58,
    "share_d.x": 2.1939,
    "reldens.x": 20.99,
    "comp_PA.x": 79.76,
    "comp_TCI.x": 31.43,
    "comp_DIF.x": 91.49,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 50.3,
    "parent.x": "Europe",
    "color.x": "#B88484",
    "id.x": "Sweden (SE)",
    "value.x": 530,
    "rank_count.x": 14,
    "rank_rca.x": 50,
    "rank_pc.x": 11,
    "rank_share.x": 14,
    "rank_reldens.x": 54,
    "count.y": 435,
    "rca.y": 0.36,
    "share.y": 0.46,
    "share_d.y": 2.2105,
    "reldens.y": 18.81,
    "comp_PA.y": 75.06,
    "comp_TCI.y": 29.37,
    "comp_DIF.y": 82.43,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 41.28,
    "parent.y": "Europe",
    "color.y": "#B67F7F",
    "id.y": "Sweden (SE)",
    "value.y": 435,
    "rank_count.y": 16,
    "rank_rca.y": 40,
    "rank_pc.y": 11,
    "rank_share.y": 16,
    "rank_reldens.y": 51,
    "color": "#C9B6B6",
    "id": "Semiconductors and Chips",
    "x": 0.58,
    "y": 0.46,
    "delta": -20.69,
    "value": 1
  },
  {
    "domain": "Sensor Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 1309,
    "rca.x": 1.08,
    "share.x": 1.6,
    "share_d.x": 1.9846,
    "reldens.x": 38.3,
    "comp_PA.x": 76.88,
    "comp_TCI.x": 11.43,
    "comp_DIF.x": 42.54,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 124.23,
    "parent.x": "Europe",
    "color.x": "#ACBFAC",
    "id.x": "Sweden (SE)",
    "value.x": 1309,
    "rank_count.x": 11,
    "rank_rca.x": 27.5,
    "rank_pc.x": 4,
    "rank_share.x": 11,
    "rank_reldens.x": 19,
    "count.y": 969,
    "rca.y": 0.94,
    "share.y": 1.19,
    "share_d.y": 1.8926,
    "reldens.y": 36.11,
    "comp_PA.y": 69.08,
    "comp_TCI.y": 33,
    "comp_DIF.y": 41.41,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 91.96,
    "parent.y": "Europe",
    "color.y": "#D1CDCD",
    "id.y": "Sweden (SE)",
    "value.y": 969,
    "rank_count.y": 13,
    "rank_rca.y": 51,
    "rank_pc.y": 5,
    "rank_share.y": 13,
    "rank_reldens.y": 30,
    "color": "#C4A6A6",
    "id": "Sensor Technologies",
    "x": 1.6,
    "y": 1.19,
    "delta": -25.63,
    "value": 1
  },
  {
    "domain": "Smart Grids",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 78,
    "rca.x": 1.39,
    "share.x": 2.06,
    "share_d.x": 0.0916,
    "reldens.x": 58.76,
    "comp_PA.x": 72.84,
    "comp_TCI.x": 58.91,
    "comp_DIF.x": 31.61,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 7.4,
    "parent.x": "Europe",
    "color.x": "#83A983",
    "id.x": "Sweden (SE)",
    "value.x": 78,
    "rank_count.x": 9,
    "rank_rca.x": 23,
    "rank_pc.x": 1,
    "rank_share.x": 9,
    "rank_reldens.x": 8,
    "count.y": 28,
    "rca.y": 0.92,
    "share.y": 1.17,
    "share_d.y": 0.0556,
    "reldens.y": 34.03,
    "comp_PA.y": 61.97,
    "comp_TCI.y": 69.11,
    "comp_DIF.y": 37.19,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 2.66,
    "parent.y": "Europe",
    "color.y": "#D0CACA",
    "id.y": "Sweden (SE)",
    "value.y": 28,
    "rank_count.y": 12,
    "rank_rca.y": 29.5,
    "rank_pc.y": 6,
    "rank_share.y": 12,
    "rank_reldens.y": 32.5,
    "color": "#A95757",
    "id": "Smart Grids",
    "x": 2.06,
    "y": 1.17,
    "delta": -43.2,
    "value": 1
  },
  {
    "domain": "Software Engineering and Systems Development",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 56,
    "rca.x": 0.76,
    "share.x": 1.12,
    "share_d.x": 0.1202,
    "reldens.x": 41.08,
    "comp_PA.x": 79.64,
    "comp_TCI.x": 56.98,
    "comp_DIF.x": 48.86,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 5.31,
    "parent.x": "Europe",
    "color.x": "#CAB8B8",
    "id.x": "Sweden (SE)",
    "value.x": 56,
    "rank_count.x": 11,
    "rank_rca.x": 36,
    "rank_pc.x": 3,
    "rank_share.x": 11,
    "rank_reldens.x": 24,
    "count.y": 48,
    "rca.y": 0.61,
    "share.y": 0.77,
    "share_d.y": 0.1444,
    "reldens.y": 39.43,
    "comp_PA.y": 76.2,
    "comp_TCI.y": 54,
    "comp_DIF.y": 58.49,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 4.56,
    "parent.y": "Europe",
    "color.y": "#C3A5A5",
    "id.y": "Sweden (SE)",
    "value.y": 48,
    "rank_count.y": 11,
    "rank_rca.y": 34.5,
    "rank_pc.y": 6,
    "rank_share.y": 11,
    "rank_reldens.y": 31,
    "color": "#BD9292",
    "id": "Software Engineering and Systems Development",
    "x": 1.12,
    "y": 0.77,
    "delta": -31.25,
    "value": 1
  },
  {
    "domain": "Solar Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 89,
    "rca.x": 0.64,
    "share.x": 0.95,
    "share_d.x": 0.2275,
    "reldens.x": 32.66,
    "comp_PA.x": 69.6,
    "comp_TCI.x": 52.15,
    "comp_DIF.x": 32.84,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 8.45,
    "parent.x": "Europe",
    "color.x": "#C5A9A9",
    "id.x": "Sweden (SE)",
    "value.x": 89,
    "rank_count.x": 17,
    "rank_rca.x": 72,
    "rank_pc.x": 8,
    "rank_share.x": 17,
    "rank_reldens.x": 54,
    "count.y": 58,
    "rca.y": 0.59,
    "share.y": 0.75,
    "share_d.y": 0.1805,
    "reldens.y": 31.8,
    "comp_PA.y": 55.12,
    "comp_TCI.y": 65.77,
    "comp_DIF.y": 29.49,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 5.5,
    "parent.y": "Europe",
    "color.y": "#C2A2A2",
    "id.y": "Sweden (SE)",
    "value.y": 58,
    "rank_count.y": 18,
    "rank_rca.y": 68,
    "rank_pc.y": 11,
    "rank_share.y": 18,
    "rank_reldens.y": 49,
    "color": "#C9B5B5",
    "id": "Solar Technologies",
    "x": 0.95,
    "y": 0.75,
    "delta": -21.05,
    "value": 1
  },
  {
    "domain": "Space Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 166,
    "rca.x": 1.55,
    "share.x": 2.29,
    "share_d.x": 0.175,
    "reldens.x": 56.11,
    "comp_PA.x": 76.07,
    "comp_TCI.x": 58.14,
    "comp_DIF.x": 43.35,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 15.75,
    "parent.x": "Europe",
    "color.x": "#77A377",
    "id.x": "Sweden (SE)",
    "value.x": 166,
    "rank_count.x": 8,
    "rank_rca.x": 13,
    "rank_pc.x": 1,
    "rank_share.x": 8,
    "rank_reldens.x": 7,
    "count.y": 263,
    "rca.y": 2.16,
    "share.y": 2.75,
    "share_d.y": 0.2228,
    "reldens.y": 61.57,
    "comp_PA.y": 72.75,
    "comp_TCI.y": 63.74,
    "comp_DIF.y": 41.46,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 24.96,
    "parent.y": "Europe",
    "color.y": "#599359",
    "id.y": "Sweden (SE)",
    "value.y": 263,
    "rank_count.y": 8,
    "rank_rca.y": 13,
    "rank_pc.y": 2,
    "rank_share.y": 8,
    "rank_reldens.y": 2,
    "color": "#699B69",
    "id": "Space Technologies",
    "x": 2.29,
    "y": 2.75,
    "delta": 20.09,
    "value": 1
  },
  {
    "domain": "Synthetic Biology",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 218,
    "rca.x": 0.61,
    "share.x": 0.9,
    "share_d.x": 0.5854,
    "reldens.x": 15.21,
    "comp_PA.x": 71.55,
    "comp_TCI.x": 34.03,
    "comp_DIF.x": 42.16,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 20.69,
    "parent.x": "Europe",
    "color.x": "#C3A5A5",
    "id.x": "Sweden (SE)",
    "value.x": 218,
    "rank_count.x": 16,
    "rank_rca.x": 63,
    "rank_pc.x": 8,
    "rank_share.x": 16,
    "rank_reldens.x": 99,
    "count.y": 219,
    "rca.y": 0.55,
    "share.y": 0.7,
    "share_d.y": 0.7301,
    "reldens.y": 11.63,
    "comp_PA.y": 65.95,
    "comp_TCI.y": 47.65,
    "comp_DIF.y": 42.79,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 20.78,
    "parent.y": "Europe",
    "color.y": "#C09C9C",
    "id.y": "Sweden (SE)",
    "value.y": 219,
    "rank_count.y": 18,
    "rank_rca.y": 67,
    "rank_pc.y": 9,
    "rank_share.y": 18,
    "rank_reldens.y": 107,
    "color": "#C8B2B2",
    "id": "Synthetic Biology",
    "x": 0.9,
    "y": 0.7,
    "delta": -22.22,
    "value": 1
  },
  {
    "domain": "Transport Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 1361,
    "rca.x": 1.15,
    "share.x": 1.71,
    "share_d.x": 1.9268,
    "reldens.x": 51.72,
    "comp_PA.x": 71.7,
    "comp_TCI.x": 39.15,
    "comp_DIF.x": 41.16,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 129.17,
    "parent.x": "Europe",
    "color.x": "#9FB89F",
    "id.x": "Sweden (SE)",
    "value.x": 1361,
    "rank_count.x": 9,
    "rank_rca.x": 44,
    "rank_pc.x": 3,
    "rank_share.x": 9,
    "rank_reldens.x": 10,
    "count.y": 1309,
    "rca.y": 1.34,
    "share.y": 1.71,
    "share_d.y": 1.784,
    "reldens.y": 60.68,
    "comp_PA.y": 62.04,
    "comp_TCI.y": 53.08,
    "comp_DIF.y": 41.95,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 124.23,
    "parent.y": "Europe",
    "color.y": "#88AB88",
    "id.y": "Sweden (SE)",
    "value.y": 1309,
    "rank_count.y": 9,
    "rank_rca.y": 24,
    "rank_pc.y": 3,
    "rank_share.y": 9,
    "rank_reldens.y": 7,
    "color": "#8EAF8E",
    "id": "Transport Technologies",
    "x": 1.71,
    "y": 1.71,
    "delta": 0,
    "value": 1
  },
  {
    "domain": "Wind Technologies",
    "geo": "Sweden (SE)",
    "data": "regpat",
    "count.x": 39,
    "rca.x": 0.56,
    "share.x": 0.83,
    "share_d.x": 0.1134,
    "reldens.x": 26.5,
    "comp_PA.x": 54.26,
    "comp_TCI.x": 57.53,
    "comp_DIF.x": 24.81,
    "population.x": 10.5366,
    "parent2.x": "Europe",
    "parent3.x": "EU14",
    "pc.x": 3.7,
    "parent.x": "Europe",
    "color.x": "#C19E9E",
    "id.x": "Sweden (SE)",
    "value.x": 39,
    "rank_count.x": 16.5,
    "rank_rca.x": 61,
    "rank_pc.x": 10,
    "rank_share.x": 16.5,
    "rank_reldens.x": 68,
    "count.y": 50,
    "rca.y": 0.73,
    "share.y": 0.94,
    "share_d.y": 0.1246,
    "reldens.y": 34.31,
    "comp_PA.y": 39.65,
    "comp_TCI.y": 57.59,
    "comp_DIF.y": 26.5,
    "population.y": 10.5366,
    "parent2.y": "Europe",
    "parent3.y": "EU14",
    "pc.y": 4.75,
    "parent.y": "Europe",
    "color.y": "#C9B4B4",
    "id.y": "Sweden (SE)",
    "value.y": 50,
    "rank_count.y": 17.5,
    "rank_rca.y": 54,
    "rank_pc.y": 8,
    "rank_share.y": 17.5,
    "rank_reldens.y": 55,
    "color": "#73A073",
    "id": "Wind Technologies",
    "x": 0.83,
    "y": 0.94,
    "delta": 13.25,
    "value": 1
  }
]  ;

const xVals=data.map(d=>d.x);
const yVals=data.map(d=>d.y);
const medianX=median(xVals);
const medianY=median(yVals);
const xDomain=[0,3.5];
const minY=Math.min(...yVals)-1;
const maxY=Math.max(...yVals)+2;

let customLabels = [];
let isUpdating = false;
let hoveringElements = new Set(); // Track which elements are being hovered

new d3plus.Plot()
  .select("#chart")
  .data(data)
  .annotations([{data:[{id:"Trend",x:medianX,y:minY},
  {id:"Trend",x:medianX,y:maxY},
  {id:"Baseline",x:xDomain[0],y:medianY},
  {id:"Baseline",x:xDomain[1],y:medianY}],shape:"Line",stroke:"#c3c3c3",strokeDasharray:"10",strokeWidth:2}])
  .groupBy(["parent","id"])
  .tooltipConfig({
    body:d=>`<table class='tooltip-table'>
      <tr><td class='title'>t:</td><td class='data'>${d.x}</td></tr>
      <tr><td class='title'>t-1:</td><td class='data'>${d.y}</td></tr>
      <tr><td class='title'>Growth/Decline (%):</td><td class='data'>${d.delta}</td></tr>
    </table>`,
    title:d=>d.id.charAt(0).toUpperCase()+d.id.substr(1).toLowerCase()
  })
  .size("value")
  .sizeMin(15)
  .sizeMax(15)
  .color("color")
  .label("")
  .shapeConfig({
    Circle:{
      labelConfig:{fontSize:0}
    }
  })
  .yConfig({
    title:"Current Period (t)",
    titleConfig:{fontSize:()=>16},
    gridConfig:{stroke:"transparent"},
    shapeConfig:{labelConfig:{fontSize:()=>16}}
  })
  .xDomain(xDomain)
  .xConfig({
    title:"Previous Period (t-1)",
    titleConfig:{fontSize:()=>16},
    gridConfig:{stroke:"transparent"},
    shapeConfig:{labelConfig:{fontSize:()=>16}}
  })
  .legend(false)
  .downloadButton(false)
  .downloadConfig({
    type:"png",
    callback: () => {
      setTimeout(() => {
        const labels = document.querySelectorAll('.custom-label');
        labels.forEach(label => {
          label.style.fontFamily = 'Arial, Helvetica, sans-serif';
          label.style.fontSize = '10px';
          label.style.fill = '#000';
          label.style.fontWeight = 'normal';
          label.setAttribute('font-family', 'Arial, Helvetica, sans-serif');
          label.setAttribute('font-size', '10');
          label.setAttribute('fill', '#000');
          label.setAttribute('font-weight', 'normal');
        });
      }, 100);
    }
  })
  .render();

setTimeout(() => {
  initializeCustomLabels();
  startPositionUpdater();
  setupDownloadHandler();
}, 500);

function setupDownloadHandler() {
  document.addEventListener('click', (e) => {
    if (e.target.textContent && e.target.textContent.includes('Download')) {
      prepareForDownload();
    }
  });
}

function prepareForDownload() {
  const labels = document.querySelectorAll('.custom-label');
  labels.forEach(label => {
    label.setAttribute('style', 'font-family: Arial, Helvetica, sans-serif; font-size: 10px; fill: #000; font-weight: normal;');
    label.setAttribute('font-family', 'Arial, Helvetica, sans-serif');
    label.setAttribute('font-size', '10');
    label.setAttribute('fill', '#000');
    label.setAttribute('font-weight', 'normal');
    label.setAttribute('stroke', 'none');
    
    const hasCollision = label.classList.contains('collision');
    label.setAttribute('opacity', hasCollision ? '0.3' : '1');
  });
}

function initializeCustomLabels() {
  const svg = document.querySelector('#chart svg');
  if (!svg) {
    setTimeout(initializeCustomLabels, 100);
    return;
  }
  
  const circles = svg.querySelectorAll('circle');
  
  function findMatchingDataPoint(circle) {
    const circleColor = circle.getAttribute('fill');
    return data.find(d => d.color === circleColor);
  }
  
  circles.forEach((circle, index) => {
    const matchingData = findMatchingDataPoint(circle);
    
    if (matchingData) {
      const fullText = matchingData.id;
      
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('class', 'custom-label');
      text.setAttribute('data-id', matchingData.id);
      text.setAttribute('text-anchor', 'start');
      text.setAttribute('font-family', 'Arial, Helvetica, sans-serif');
      text.setAttribute('font-size', '10');
      text.setAttribute('fill', '#000');
      text.setAttribute('font-weight', 'normal');
      text.textContent = fullText;
      
      svg.appendChild(text);
      
      customLabels.push({
        circle: circle,
        text: text,
        data: matchingData,
        fullText: fullText,
        defaultText: fullText,
        savedPosition: null
      });
      
      circle.addEventListener('mouseenter', () => {
        hoveringElements.add(text);
        
        const labelData = customLabels.find(l => l.circle === circle);
        if (labelData) {
          labelData.savedPosition = {
            x: text.getAttribute('x'),
            y: text.getAttribute('y'),
            anchor: text.getAttribute('text-anchor'),
            content: text.textContent
          };
        }
        
        text.classList.add('hover');
        text.textContent = fullText;
      });
      
      circle.addEventListener('mouseleave', () => {
        hoveringElements.delete(text);
        
        text.classList.remove('hover');
        
        const labelData = customLabels.find(l => l.circle === circle);
        if (labelData && labelData.savedPosition) {
          text.setAttribute('x', labelData.savedPosition.x);
          text.setAttribute('y', labelData.savedPosition.y);
          text.setAttribute('text-anchor', labelData.savedPosition.anchor);
          text.textContent = labelData.savedPosition.content;
        }
      });
    }
  });
  
  updateLabelPositions();
}

function updateLabelPositions() {
  if (isUpdating) return;
  isUpdating = true;
  
  const svg = document.querySelector('#chart svg');
  if (!svg) {
    isUpdating = false;
    return;
  }
  
  const circlePositions = [];
  
  customLabels.forEach(({circle, text}) => {
    if (circle && text) {
      const bbox = circle.getBoundingClientRect();
      const svgRect = svg.getBoundingClientRect();
      
      const svgPoint = svg.createSVGPoint();
      svgPoint.x = bbox.left + bbox.width/2 - svgRect.left;
      svgPoint.y = bbox.top + bbox.height/2 - svgRect.top;
      
      const screenCTM = svg.getScreenCTM();
      if (screenCTM) {
        const svgCoords = svgPoint.matrixTransform(screenCTM.inverse());
        circlePositions.push({
          circle: circle,
          coords: svgCoords
        });
      }
    }
  });
  
  customLabels.forEach((labelData) => {
    const {circle, text, fullText} = labelData;
    
    if (hoveringElements.has(text)) {
      return;
    }
    
    if (circle && text) {
      const circleData = circlePositions.find(cp => cp.circle === circle);
      if (circleData) {
        const r = parseFloat(circle.getAttribute('r')) || 7.5;
        const bestPosition = findBestPosition(
          text, 
          circleData.coords.x, 
          circleData.coords.y, 
          r,
          circlePositions,
          fullText
        );
        
        text.setAttribute('x', bestPosition.x);
        text.setAttribute('y', bestPosition.y);
        text.setAttribute('text-anchor', bestPosition.anchor);
        text.textContent = bestPosition.text;
        labelData.defaultText = bestPosition.text;
        
        if (bestPosition.hasCollision) {
          text.classList.add('collision');
          text.setAttribute('opacity', '0.3');
        } else {
          text.classList.remove('collision');
          text.setAttribute('opacity', '1');
        }
      }
    }
  });
  
  isUpdating = false;
}

function startPositionUpdater() {
  function updateLoop() {
    updateLabelPositions();
    requestAnimationFrame(updateLoop);
  }
  
  updateLoop();
  
  const chartElement = document.getElementById('chart');
  if (chartElement) {
    chartElement.addEventListener('wheel', updateLabelPositions, { passive: true });
    chartElement.addEventListener('mousedown', updateLabelPositions);
    chartElement.addEventListener('mousemove', updateLabelPositions);
    chartElement.addEventListener('mouseup', updateLabelPositions);
  }
}
</script>
<div style="position:fixed;right:10px;bottom:10px;font-size:11px;color:#888;z-index:9999;">
Color represents growth or decline between periods. Green does not necessarily indicate positive growth. 
</div>
</body>
</html>
