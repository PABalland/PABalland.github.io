test = subset (df2, df2$prio=="Ukraine")
if (length(test$prio==0)){
dfuk = df2[1,]
dfuk$prio="Ukraine"
dfuk$n=0
dfuk$share=0
df2 = rbind (df2, dfuk)
return (df2)
}
View(df2)
is(length(test$prio==0))
test = subset (df2, df2$prio=="Ukraine")
if (length(test$prio)==0){
dfuk = df2[1,]
dfuk$prio="Ukraine"
dfuk$n=0
dfuk$share=0
df2 = rbind (df2, dfuk)
return (df2)
}
# subset for ai
i = "Artificial intelligence"
df3 = NULL
for (i in unique (count$priority)){
# add zroes
df2 = subset (count, count$priority==i)
df2 = subset (df2, df2$year>=2017)
df2 = subset (df2, df2$year<=2023) # before full scale russian invasion
df2 = subset (df2, df2$regions == "Europe & Central Asia")
df2$countperiodprio = ave(df2$count.prio.pat, df2$ctry, FUN = sum)
df2$countperiod = ave(df2$count.pat, df2$ctry, FUN = sum)
df2$share = round(100*df2$countperiodprio /df2$countperiod,3)
df2 = unique (df2[, c("ctrynames", "countperiodprio", "countperiod","share")])
# save as json file
df2 = subset (df2, !df2$ctrynames == "Russia")
df2 = subset (df2, !df2$ctrynames == "Turkey")
df2$prio = df2$ctrynames
df2$n = df2$countperiodprio
df2$parent[df2$ctrynames=="Ukraine"] = "Ukraine"
df2$parent[!df2$ctrynames=="Ukraine"] = "Other"
df2$color = "#237266"
df2$color[df2$ctrynames=="Ukraine"] = "black"
df2 = unique (df2[, c("prio", "n", "parent", "color", "share")])
# add zeroes
#df3 = data.frame (prio = unique (unique(df$ctrynames[df$regions=="Europe & Central Asia"])),
#    n = 0,
#   parent = "Other",
#   color = "#237266")
#df3$color[df2$ctrynames=="Ukraine"] = "black"
#df3 = subset (df3, !df3$prio %in% df2$prio)
#df3 = df3[complete.cases(df3),]
#df3 = subset (df3, !df3$prio == "Russia")
#df3 = subset (df3, !df3$prio == "Turkey")
#df2 = rbind (df2, df3)
# add missing
test = subset (df2, df2$prio=="Ukraine")
if (length(test$prio)==0){
dfuk = df2[1,]
dfuk$prio="Ukraine"
dfuk$n=0
dfuk$share=0
df2 = rbind (df2, dfuk)
}
df2$rank = rank(-df2$n)
df2$sector = i
df3 = rbind (df3, df2)
ex <- toJSON(df2)
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido/ukraine/pat")
write(ex, paste0(tolower(gsub(" ", "-", i)), ".json"))
}
df = subset (df3, df3$prio=="Ukraine")
df$rank = rank(df$rank)
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
write.csv(df, "ranking-sectors-ukraine.csv")
#colnames(df) = c("n", "ua", "prio", "share")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
View(df)
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
View(df)
View(df)
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
View(df)
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = 1
df$value = 1
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "top"
df$color = "black"
df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
ex <- toJSON(df)
write(ex, "smart.json")
# grab the x (ai rate)
dt <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
# grab the x (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
head(dt1)
# grab the x (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
View(dt)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
View(dt)
dt$rank = rank(dt$rank.pat+dt$rank.pub+dt$rank.vc)
dt$rank.y = rank(dt$yvc+dt$ypat+dt$ypub)
View(dt)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
View(dt)
df = merge (df, dt, by = "prio")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = -df$rank.y
df$value = 1
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "top"
df$color = "black"
df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
ex <- toJSON(df)
write(ex, "smart.json")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = -df$rank.y
df$value = 1
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x) & df$y<=(median(df$y)))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x) & df$y>(median(df$y)))] = "High rewards - High risks"
df$parent[df$x<(median(df$x) & df$y<(median(df$y)))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x) & df$y>(median(df$y)))] = "#365a94"
df$color[df$x>(median(df$x) & df$y<=(median(df$y)))] = "darkgreen"
df$color[df$x<=(median(df$x) & df$y>(median(df$y)))] = "darkorange"
df$color[df$x<(median(df$x) & df$y<(median(df$y)))] = "#8B4513"
df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
ex <- toJSON(df)
write(ex, "smart.json")
View(df)
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = df$rank
df$y = df$rank.y
df$value = 1
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x) & df$y<=(median(df$y)))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x) & df$y>(median(df$y)))] = "High rewards - High risks"
df$parent[df$x<(median(df$x) & df$y<(median(df$y)))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x) & df$y>(median(df$y)))] = "#365a94"
df$color[df$x>(median(df$x) & df$y<=(median(df$y)))] = "darkgreen"
df$color[df$x<=(median(df$x) & df$y>(median(df$y)))] = "darkorange"
df$color[df$x<(median(df$x) & df$y<(median(df$y)))] = "#8B4513"
df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
ex <- toJSON(df)
write(ex, "smart.json")
head(df)
[{"id":"Aerospace","x":-36.52,"y":1.13,"value":1.13,"parent":"RCA>1","color":"#800020","count":4},
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = df$rank
df$y = df$rank.y
df$value = df$x
df$count = df$y
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x) & df$y<=(median(df$y)))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x) & df$y>(median(df$y)))] = "High rewards - High risks"
df$parent[df$x<(median(df$x) & df$y<(median(df$y)))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x) & df$y>(median(df$y)))] = "#365a94"
df$color[df$x>(median(df$x) & df$y<=(median(df$y)))] = "darkgreen"
df$color[df$x<=(median(df$x) & df$y>(median(df$y)))] = "darkorange"
df$color[df$x<(median(df$x) & df$y<(median(df$y)))] = "#8B4513"
#df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
df = df[, c("id", "x", "y", "value", "parent", "color", "count")]
ex <- toJSON(df)
write(ex, "smart.json")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = -df$rank.y
df$value = df$x
df$count = df$y
df$parent[df$x>(median(df$x) & df$y>(median(df$y)))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x) & df$y<=(median(df$y)))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x) & df$y>(median(df$y)))] = "High rewards - High risks"
df$parent[df$x<(median(df$x) & df$y<(median(df$y)))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x) & df$y>(median(df$y)))] = "#365a94"
df$color[df$x>(median(df$x) & df$y<=(median(df$y)))] = "darkgreen"
df$color[df$x<=(median(df$x) & df$y>(median(df$y)))] = "darkorange"
df$color[df$x<(median(df$x) & df$y<(median(df$y)))] = "#8B4513"
#df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
df = df[, c("id", "x", "y", "value", "parent", "color", "count")]
ex <- toJSON(df)
write(ex, "smart.json")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = -df$rank.y
df$value = df$x
df$count = df$y
df$parent[df$x>(median(df$x)) & df$y>(median(df$y))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x)) & df$y<=(median(df$y))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x)) & df$y>(median(df$y))] = "High rewards - High risks"
df$parent[df$x<(median(df$x)) & df$y<(median(df$y))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x)) & df$y>(median(df$y))] = "#365a94"
df$color[df$x>(median(df$x)) & df$y<=(median(df$y))] = "darkgreen"
df$color[df$x<=(median(df$x)) & df$y>(median(df$y))] = "darkorange"
df$color[df$x<(median(df$x)) & df$y<(median(df$y))] = "#8B4513"
#df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
df = df[, c("id", "x", "y", "value", "parent", "color", "count")]
ex <- toJSON(df)
write(ex, "smart.json")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pat")
df1 = read.csv("ranking-sectors-ukraine.csv")
df1 = df1[, c("sector", "rank")]
colnames (df1) =  c("prio", "rank.pat")
df1$prio[df1$prio == "Chemical engineering"] = "Chemical"
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/pub")
df2 = read.csv("ranking-sectors-ukraine.csv")
df2 = df2[, c("sector", "rank")]
colnames (df2) =  c("prio", "rank.pub")
setwd("~/Dropbox/1-asg/1-production/3-projects/3-unido/3-outputs/ukraine/vc")
df3 = read.csv("ranking-sectors-ukraine.csv")
df3 = df3[, c("prio", "rank")]
colnames (df3) =  c("prio", "rank.vc")
df3$prio[df3$prio == "Artificial Intelligence"] = "Artificial intelligence"
df = merge (df1, df2, by = "prio", all = T)
df = merge (df, df3, by = "prio", all = T)
# remove ai
df = subset (df, !df$prio=="Artificial intelligence")
df$rank = rank(df$rank.pat+df$rank.pub+df$rank.vc)
# grab the y (ai rate)
dt1 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/vc/prio-sectors.json")
dt1 = dt1[, c("prio", "n")]
colnames (dt1) = c("prio", "yvc")
dt2 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pat/prio-sectors.json")
dt2 = dt2[, c("prio", "n")]
colnames (dt2) = c("prio", "ypat")
dt2$prio[dt2$prio == "Chemical engineering"] = "Chemical"
dt3 <- fromJSON("https://www.paballand.com/ceps/unido/ai-rate/pub/prio-sectors.json")
dt3 = dt3[, c("prio", "n")]
colnames (dt3) = c("prio", "ypub")
dt = merge (dt1, dt2, by = "prio", all = T)
dt = merge (dt, dt3, by = "prio", all = T)
dt$rank.y = rank(-(dt$yvc+dt$ypat+dt$ypub))
df = merge (df, dt, by = "prio")
# create json file for bubble chart
df$id = df$prio
df$x = -df$rank
df$y = -df$rank.y
df$value = 1
df$count = 1
df$parent[df$x>(median(df$x)) & df$y>(median(df$y))] = "High rewards - Low risks"
df$parent[df$x>(median(df$x)) & df$y<=(median(df$y))] = "Low rewards - Low risks"
df$parent[df$x<=(median(df$x)) & df$y>(median(df$y))] = "High rewards - High risks"
df$parent[df$x<(median(df$x)) & df$y<(median(df$y))] = "Low rewards - Low risks"
df$color[df$x>(median(df$x)) & df$y>(median(df$y))] = "#365a94"
df$color[df$x>(median(df$x)) & df$y<=(median(df$y))] = "darkgreen"
df$color[df$x<=(median(df$x)) & df$y>(median(df$y))] = "darkorange"
df$color[df$x<(median(df$x)) & df$y<(median(df$y))] = "#8B4513"
df$count = 1
setwd("/Users/pierre-alex/Dropbox/PABalland.github.io/ceps/unido")
df = df[, c("id", "x", "y", "value", "parent", "color", "count")]
ex <- toJSON(df)
write(ex, "smart.json")
